import{c as q,a as le,r as n,e as V,p as c,j as e,B as d,L as re}from"./index-nOuz7UgQ.js";import{D as ne}from"./data-table-Ba5JECbl.js";import{I as F}from"./input-DklGojSC.js";import{A as ie,a as oe,b as ce,c as de,d as me,e as he,f as xe,g as ue}from"./alert-dialog-Cli71-ps.js";import{T as pe,a as fe,b as $,c as x,d as je,e as u}from"./table-4xI31D1l.js";import{B as ge}from"./badge-S95f_PVZ.js";import{S as E,a as K,b as H,c as O,d as p}from"./select-DT7Kb_gw.js";import{D as Ne,a as be}from"./dialog-uBmBf2NY.js";import{C as B,f as M}from"./date-picker-B-Lwwkpp.js";import{P as ye}from"./plus-CZDVeQSw.js";import{S as U}from"./search-B6zcHxLG.js";import{U as ve}from"./user-MNTrj_CW.js";import{E as we}from"./eye-BOx9CZOj.js";import"./index-3ZGvXOoV.js";import"./x-uWU76mA2.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],De=q("arrow-right",Ce);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]],Te=q("door-closed",Se);function qe(){const Q=le(),[v,f]=n.useState([]),w=new Date,[j,C]=n.useState(w),[g,D]=n.useState(w),[m,S]=n.useState(""),[h,T]=n.useState(""),[N,k]=n.useState(""),[R,_]=n.useState(""),[z,b]=n.useState(!1),[L,G]=n.useState(!1);n.useEffect(()=>{const s=V.map(t=>{const l=c.find(a=>a.id===t.patientId);return{...t,patientName:l?`${l.firstName} ${l.lastName}`:"Unknown"}});f(s),setTimeout(()=>o(),0)},[]);const o=()=>{let s=V.map(a=>{const r=c.find(i=>i.id===a.patientId);return{...a,patientName:r?`${r.firstName} ${r.lastName}`:"Unknown"}});const t=j,l=g;if((t||l)&&(s=s.filter(a=>{const r=new Date(a.date);if(r.setHours(0,0,0,0),t){const i=new Date(t);if(i.setHours(0,0,0,0),r<i)return!1}if(l){const i=new Date(l);if(i.setHours(0,0,0,0),r>i)return!1}return!0})),N){const a=N.toLowerCase();s=s.filter(r=>r.patientName.toLowerCase().includes(a)||r.patientId.toLowerCase().includes(a)||r.doctor.firstName.toLowerCase().includes(a)||r.doctor.lastName.toLowerCase().includes(a))}m&&(alert("yooo"),s=s.filter(a=>a.status.toLowerCase()===m.toLowerCase())),h&&(s=s.filter(a=>a.type.toLowerCase()===h.toLowerCase())),f(s),G(!1)};n.useEffect(()=>{o()},[j,g,m,h]);const J=s=>{k(s.target.value),setTimeout(()=>o(),10)},W=()=>{const s=new Date;C(s),D(s),k(""),S(""),T(""),setTimeout(()=>o(),100)},X=s=>{_(s),b(!0)},Y=()=>{const s=v.filter(t=>t.id!==R);f(s),b(!1)},Z=[{accessorKey:"patientId",header:"Patient",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col py-1 space-y-1",children:[e.jsx("span",{className:"text-sm text-primary",children:s.getValue("patientId")}),e.jsx("span",{children:s.original.patientName})]})},{accessorKey:"date",header:"Visit Date",cell:({row:s})=>M(s.getValue("date"),"PPP")},{accessorKey:"date",header:"Visit Time",cell:({row:s})=>M(s.getValue("date"),"h:mm a")},{accessorKey:"type",header:"Treatment Type"},{accessorKey:"paymentType",header:"Payment Type"},{accessorKey:"status",header:"Status",cell:({row:s})=>{const t=s.getValue("status");let l;switch(t.toLowerCase()){case"open":l="bg-green-100 text-green-800";break;case"closed":l="bg-gray-100 text-gray-800";break;case"scheduled":l="bg-blue-100 text-blue-800";break;case"completed":l="bg-emerald-100 text-emerald-800";break;case"cancelled":l="bg-red-100 text-red-800";break;case"pending":l="bg-amber-100 text-amber-800";break;default:l="bg-gray-100 text-gray-800"}return e.jsx(ge,{variant:"outline",className:l,children:t})}},{accessorKey:"doctor",header:"Doctor",accessorFn:s=>`${s.doctor.firstName} ${s.doctor.lastName}`},{id:"actions",header:"Actions",cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-primary border-primary",asChild:!0,children:e.jsxs(re,{to:`/healthcare/treatment-dates/${t.id}`,children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]})}),s.original.status==="open"?e.jsxs(d,{variant:"outline",onClick:()=>X(t.id),className:"p-0 text-amber-600 border-amber-600",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"",children:"Close"})]}):null]})}}],[ee,y]=n.useState(!1),[P,se]=n.useState(""),[ae,te]=n.useState(c);return e.jsxs("div",{className:"p-6 bg-white shadow",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Treatment Dates"}),e.jsx("p",{className:"text-gray-500",children:"Manage and view all patient treatment dates and appointments"})]}),e.jsxs(d,{className:"py-6 text-lg",onClick:()=>y(!0),children:[e.jsx(ye,{})," Add Treatment Date"]}),e.jsx(Ne,{open:ee,onOpenChange:y,children:e.jsx(be,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select a Patient"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Search and select a patient to create a new treatment date"})]}),e.jsx("div",{className:"flex w-full items-center space-x-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"Search patients by name, ID, or phone...",className:"pl-8",value:P,onChange:s=>{const t=s.target.value.toLowerCase();se(t);const l=c.filter(a=>{var r,i,A,I;return((r=a.id)==null?void 0:r.toLowerCase().includes(t))||((i=a.firstName)==null?void 0:i.toLowerCase().includes(t))||((A=a.lastName)==null?void 0:A.toLowerCase().includes(t))||((I=a.phone)==null?void 0:I.toLowerCase().includes(t))||`${a.firstName} ${a.lastName}`.toLowerCase().includes(t)});te(l)}})]})}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(pe,{children:[e.jsx(fe,{children:e.jsxs($,{children:[e.jsx(x,{children:"ID"}),e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Phone"}),e.jsx(x,{className:"text-right",children:"Action"})]})}),e.jsx(je,{children:(P?ae:c).map(s=>e.jsxs($,{className:"cursor-pointer hover:bg-muted/50",children:[e.jsx(u,{className:"font-medium",children:s.id}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.firstName," ",s.lastName]})}),e.jsx(u,{children:s.phone}),e.jsx(u,{className:"text-right",children:e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{y(!1),Q(`/healthcare/entity-registration/${s.id}`)},children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View Patient"})]})})]},s.id))})]})})]})})})]}),e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Filters"}),L&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating results..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(F,{placeholder:"Patient name, ID or doctor...",value:N,onChange:J,className:"pl-9 w-full"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Status"}),e.jsxs(E,{value:m,onValueChange:s=>{S(s),setTimeout(()=>o(),0)},children:[e.jsx(K,{className:"w-full",children:e.jsx(H,{placeholder:"Patient Statuses"})}),e.jsxs(O,{children:[e.jsx(p,{value:"open",children:"Open"}),e.jsx(p,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Treatment Type"}),e.jsxs(E,{value:h,onValueChange:s=>{T(s)},children:[e.jsx(K,{className:"w-full",children:e.jsx(H,{placeholder:"All Types"})}),e.jsxs(O,{children:[e.jsx(p,{value:"inpatient",children:"Inpatient"}),e.jsx(p,{value:"outpatient",children:"Outpatient"})]})]})]}),e.jsxs("div",{className:"md:col-span-4 flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),e.jsx(B,{value:j||void 0,onChange:s=>C(s)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),e.jsx(B,{value:g||void 0,onChange:s=>D(s)})]})]}),e.jsx("div",{className:"md:col-span-1 flex justify-end",children:e.jsx(d,{variant:"outline",onClick:W,disabled:L,className:"h-10 w-full",children:"Reset"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx(ne,{columns:Z,data:v,searchKey:"patientName",searchPlaceholder:"Filter by patient name..."})}),e.jsx(ie,{open:z,onOpenChange:b,children:e.jsxs(oe,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Are you sure you want to close this treatment?"}),e.jsx(me,{children:"This action cannot be undone. This will permanently close the treatment record."})]}),e.jsxs(he,{children:[e.jsx(xe,{children:"Cancel"}),e.jsx(ue,{onClick:Y,className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Close"})]})]})})]})}export{qe as default};
