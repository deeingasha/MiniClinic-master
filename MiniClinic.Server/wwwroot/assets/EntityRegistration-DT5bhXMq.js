import{c as K,a as z,r as p,j as e,B as b,W as y,X as B}from"./index-KKXNW-6l.js";import{D as H,a as O,h as Q,i as W,g as _}from"./dialog-DGonRxIX.js";import{B as $}from"./badge-6EpgP7IY.js";import{S as w,a as C,b as S,c as D,d as l,A as G,e as X,f as J,g as Y,h as Z,i as ee,j as se,k as ae}from"./alert-dialog-BXVzzcwE.js";import{I as N}from"./input-rtAShtQR.js";import{u as le,s as te,F as re,a as d,b as m,c as h,d as x,e as u,z as i}from"./form-Bx7btksj.js";import{S as ne,A as ie,a as ce}from"./Snackbar-CwQWZ5mi.js";import{A as oe}from"./Alert-Tprf8h7W.js";import{E as de}from"./eye-Bp3zdP_9.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],he=K("funnel",me),xe=[{value:"patient",label:"Patient"},{value:"nurse",label:"Nurse"},{value:"admin",label:"Admin"},{value:"finance",label:"Finance"},{value:"pharmacist",label:"Pharmacist"},{value:"doctor",label:"Doctor"},{value:"receptionist",label:"Receptionist"},{value:"pathologist",label:"Pathologist"}],ue=i.object({entityType:i.enum(["nurse","receptionist","patient","admin","finance","pathologist","pharmacist"]),firstName:i.string().min(1,"First name is required"),middleName:i.string().optional(),lastName:i.string().min(1,"Last name is required"),phone:i.string().min(1,"Phone number is required"),sex:i.enum(["male","female"]),idType:i.enum(["passport","national id"]),idNumber:i.string().min(1,"ID number is required"),passportNumber:i.string().optional(),dob:i.date(),address:i.string().optional(),maritalStatus:i.enum(["single","married","divorced","widowed"]),email:i.string().email().optional()});function je({open:v,onClose:g,onEntityCreated:f}){const P=z(),[I,k]=p.useState(!1),[V,M]=p.useState(""),t=le({resolver:te(ue),defaultValues:{entityType:"patient",firstName:"",middleName:"",lastName:"",phone:"",sex:"male",idType:"national id",idNumber:"",passportNumber:"",dob:new Date,address:"",maritalStatus:"single",email:""}}),o=()=>{k(!1)},A=s=>{let j=1;if(y.length>0){const F=y[y.length-1];if(F&&F.id){const T=F.id.match(/(\w+)-(\d+)/);T&&T[2]&&(j=parseInt(T[1])+1)}}const L={id:`PAT-${j.toString().padStart(3,"0")}`,firstName:s.firstName,lastName:s.lastName,phone:s.phone,email:s.email||"",role:s.entityType,password:void 0,department:void 0,shift:void 0,username:""};y.push(L),M("Entity created successfully!"),k(!0),t.reset(),f&&f(L),setTimeout(()=>{g==null||g(),s.entityType==="patient"&&P(`/healthcare/registration/${L.id}`)},1500)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{open:v,onOpenChange:s=>!s&&(g==null?void 0:g()),children:e.jsxs(O,{className:"min-w-4xl w-full",children:[e.jsx(Q,{children:e.jsx(W,{className:"text-lg font-medium",children:"Add New Entity"})}),e.jsx("div",{className:"p-3 pt-2",children:e.jsx(re,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(A),className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(d,{control:t.control,name:"entityType",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Entity Type"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(x,{children:e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"Select entity type"})})}),e.jsx(D,{children:xe.map(j=>e.jsx(l,{value:j.value,children:j.label},j.value))})]}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"firstName",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"First Name"}),e.jsx(x,{children:e.jsx(N,{placeholder:"First name",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"middleName",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Middle Name"}),e.jsx(x,{children:e.jsx(N,{placeholder:"Middle name",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"lastName",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Last Name"}),e.jsx(x,{children:e.jsx(N,{placeholder:"Last name",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"phone",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Phone"}),e.jsx(x,{children:e.jsx(N,{placeholder:"Phone number",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Email"}),e.jsx(x,{children:e.jsx(N,{placeholder:"Email address",type:"email",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"dob",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Date of Birth"}),e.jsx(x,{children:e.jsx(N,{type:"date",...s,value:s.value?new Date(s.value).toISOString().split("T")[0]:"",onChange:j=>s.onChange(j.target.valueAsDate)})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"sex",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Sex"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(x,{children:e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"Select sex"})})}),e.jsxs(D,{children:[e.jsx(l,{value:"male",children:"Male"}),e.jsx(l,{value:"female",children:"Female"})]})]}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"idType",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"ID Type"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(x,{children:e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"Select ID type"})})}),e.jsxs(D,{children:[e.jsx(l,{value:"passport",children:"Passport"}),e.jsx(l,{value:"national id",children:"National ID"})]})]}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"idNumber",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"ID Number"}),e.jsx(x,{children:e.jsx(N,{placeholder:"ID number",...s})}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"maritalStatus",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Marital Status"}),e.jsxs(w,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(x,{children:e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"Select marital status"})})}),e.jsxs(D,{children:[e.jsx(l,{value:"single",children:"Single"}),e.jsx(l,{value:"married",children:"Married"}),e.jsx(l,{value:"divorced",children:"Divorced"}),e.jsx(l,{value:"widowed",children:"Widowed"})]})]}),e.jsx(u,{className:"text-xs"})]})}),e.jsx(d,{control:t.control,name:"address",render:({field:s})=>e.jsxs(m,{children:[e.jsx(h,{children:"Address"}),e.jsx(x,{children:e.jsx(N,{placeholder:"Address",...s})}),e.jsx(u,{className:"text-xs"})]})})]}),e.jsxs("div",{className:"flex items-end justify-end gap-2 mt-4",children:[e.jsx(b,{variant:"outline",type:"button",onClick:g,children:"Cancel"}),e.jsx(b,{type:"submit",children:"Create Entity"})]})]})})})]})}),e.jsx(ne,{open:I,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsxs(oe,{onClose:o,severity:"success",sx:{width:"100%"},children:[e.jsx(ie,{children:"Success"}),V]})})]})}function Se(){const[v]=p.useState(y),[g,f]=p.useState(y),[P,I]=p.useState(!1),[k,V]=p.useState(""),[M,t]=p.useState(!1),[o,A]=p.useState(""),[s,j]=p.useState("");p.useEffect(()=>{let n=[...v];if(o&&(n=n.filter(r=>r.role.toLowerCase()===o.toLowerCase())),s){const r=s.toLowerCase();n=n.filter(a=>a.firstName.toLowerCase().includes(r)||a.lastName.toLowerCase().includes(r)||a.email.toLowerCase().includes(r)||a.id.toLowerCase().includes(r)||a.phone.toLowerCase().includes(r))}f(n)},[o,s,v]);const U=n=>{V(n),t(!0)},L=()=>{let r=v.filter(a=>a.id!==k);if(o&&(r=r.filter(a=>a.role.toLowerCase()===o.toLowerCase())),s){const a=s.toLowerCase();r=r.filter(c=>c.firstName.toLowerCase().includes(a)||c.lastName.toLowerCase().includes(a)||c.email.toLowerCase().includes(a)||c.id.toLowerCase().includes(a)||c.phone.toLowerCase().includes(a))}f(r),t(!1)},F=()=>{I(!0)},T=()=>{I(!1)},q=n=>{let a=[...v,n];if(o&&(a=a.filter(c=>c.role.toLowerCase()===o.toLowerCase())),s){const c=s.toLowerCase();a=a.filter(E=>E.firstName.toLowerCase().includes(c)||E.lastName.toLowerCase().includes(c)||E.email.toLowerCase().includes(c)||E.id.toLowerCase().includes(c)||E.phone.toLowerCase().includes(c))}f(a)},R=[{accessorKey:"id",header:"ID"},{accessorKey:"firstName",header:"First Name"},{accessorKey:"lastName",header:"Last Name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"role",header:"Entity Type",cell:({row:n})=>{const r=n.getValue("role");let a;switch(r){case"doctor":a="bg-blue-100 text-blue-800";break;case"nurse":a="bg-green-100 text-green-800";break;case"receptionist":a="bg-purple-100 text-purple-800";break;case"patient":a="bg-amber-100 text-amber-800";break;case"admin":a="bg-red-100 text-red-800";break;case"finance":a="bg-emerald-100 text-emerald-800";break;case"pathologist":a="bg-indigo-100 text-indigo-800";break;case"pharmacist":a="bg-teal-100 text-teal-800";break;default:a="bg-gray-100 text-gray-800"}return e.jsx($,{variant:"outline",className:a,children:r})}},{id:"actions",header:"Actions",cell:({row:n})=>{const r=n.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-blue-600 border-blue-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>U(r.id),className:"h-8 w-8 p-0 text-gray-600 border-gray-600",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})]})}}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Entity Registration"}),e.jsx("p",{className:"text-gray-500",children:"Manage users, patients, doctors and other entities"})]}),e.jsxs(b,{onClick:F,className:"gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add New Entity"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mb-1 flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-medium",children:"Filters"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(N,{placeholder:"Search by name, email, phone or ID...",value:s,onChange:n=>j(n.target.value),className:"pl-9 w-full"})]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Type"}),e.jsxs(w,{value:o,onValueChange:A,children:[e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"All Entity Types"})}),e.jsxs(D,{children:[e.jsx(l,{value:"patient",children:"Patient"}),e.jsx(l,{value:"doctor",children:"Doctor"}),e.jsx(l,{value:"nurse",children:"Nurse"}),e.jsx(l,{value:"receptionist",children:"Receptionist"}),e.jsx(l,{value:"admin",children:"Admin"}),e.jsx(l,{value:"finance",children:"Finance"}),e.jsx(l,{value:"pathologist",children:"Pathologist"}),e.jsx(l,{value:"pharmacist",children:"Pharmacist"})]})]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs(w,{value:o,onValueChange:A,children:[e.jsx(C,{className:"w-full",children:e.jsx(S,{placeholder:"Status"})}),e.jsxs(D,{children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(b,{variant:"outline",onClick:()=>{A(""),j("")},className:"h-10 w-full",children:"Reset"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx(_,{columns:R,data:g,showGlobalFilter:!1})}),e.jsx(je,{open:P,onClose:T,onEntityCreated:q}),e.jsx(G,{open:M,onOpenChange:t,children:e.jsxs(X,{children:[e.jsxs(J,{children:[e.jsx(Y,{children:"Are you sure you want to delete this entity?"}),e.jsx(Z,{children:"This action cannot be undone. This will permanently delete the user/entity record."})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Cancel"}),e.jsx(ae,{onClick:L,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}export{Se as default};
