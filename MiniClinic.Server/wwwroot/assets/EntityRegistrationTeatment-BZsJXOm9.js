import{c as G,j as e,a5 as Y,r as g,B as D,_ as Z,a as ee,p as H,X as se}from"./index-nOuz7UgQ.js";import{u as q,s as K,z as l,F as R,a as c,b as d,c as o,d as m,e as j}from"./form-ofhE3mRP.js";import{A as ae,a as ne,b as le,c as te,d as re,e as ie,f as ce,g as de}from"./alert-dialog-Cli71-ps.js";import{I as x}from"./input-DklGojSC.js";import{S as v,a as b,b as f,c as S,d as i}from"./select-DT7Kb_gw.js";import{U as oe}from"./user-MNTrj_CW.js";import{S as Q}from"./save-DtQdiY68.js";import{a as me,A as z,S as xe}from"./Snackbar-CYctmcJc.js";import{T as he,C as je,b as ue,c as pe,a as Ne}from"./Tabs-n4zGeLf8.js";import{T as ge}from"./textarea-BYs_5LZy.js";import{a as J,C as $}from"./date-picker-B-Lwwkpp.js";import{A as U}from"./Alert-BMujoVFi.js";import"./label-BgUwjubx.js";import"./index-3ZGvXOoV.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],W=G("circle-plus",ve);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],fe=G("phone",be),Se=l.object({fathersName:l.string().min(2,"Father's name must be at least 2 characters"),mothersName:l.string().min(2,"Mother's name must be at least 2 characters"),poBox:l.string().min(2,"PO Box must be at least 2 characters"),addressLine1:l.string().min(2,"Address Line 1 must be at least 2 characters"),addressLine2:l.string().min(2,"Address Line 2 must be at least 2 characters"),mobile1:l.string().min(2,"Mobile 1 must be at least 2 characters"),mobile2:l.string().min(2,"Mobile 2 must be at least 2 characters"),fax:l.string().min(2,"Fax must be at least 2 characters"),email:l.string().email("Invalid email address"),nextofKinName:l.string().min(2,"Next of kin name must be at least 2 characters"),nextofKinMobile:l.string().min(2,"Next of kin mobile must be at least 2 characters"),relationship:l.enum(["Father","Mother","Son","Daughter","Brother","Sister","Wife","Husband","Other"])});function ye({patient:y=void 0}){y=y;const r=q({resolver:K(Se),defaultValues:{fathersName:"",mothersName:"",poBox:"",addressLine1:"",addressLine2:"",mobile1:"",mobile2:"",fax:"",email:"",nextofKinName:"",nextofKinMobile:"",relationship:"Other"}}),u=n=>{console.log(n)};return e.jsx(R,{...r,children:e.jsx("form",{onSubmit:r.handleSubmit(u),className:"space-y-3",children:e.jsxs("div",{className:"grid gap-3 grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center p-3 pb-2 border-b",children:[e.jsx(Y,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Address Details"})]}),e.jsx("div",{className:"p-3 pt-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{control:r.control,name:"poBox",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"PO Box"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter PO Box",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:r.control,name:"addressLine1",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Address Line 1"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter address line 1",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})})]}),e.jsx(c,{control:r.control,name:"addressLine2",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Address Line 2"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter address line 2",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{control:r.control,name:"mobile1",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Mobile 1"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter mobile 1",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:r.control,name:"mobile2",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Mobile 2"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter mobile 2",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{control:r.control,name:"fax",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Fax"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter fax",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:r.control,name:"email",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Email"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter email",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center p-3 pb-2 border-b",children:[e.jsx(oe,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Parents Details"})]}),e.jsx("div",{className:"p-3 pt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{control:r.control,name:"fathersName",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Father's Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter father's name",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:r.control,name:"mothersName",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Mother's Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter mother's name",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center p-3 pb-2 border-b",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Next of Kin Details"})]}),e.jsx("div",{className:"p-3 pt-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(c,{control:r.control,name:"nextofKinName",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Next of Kin Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter next of kin name",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{control:r.control,name:"nextofKinMobile",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Next of Kin Mobile"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Enter next of kin mobile",...n,className:""})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:r.control,name:"relationship",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs",children:"Relationship"}),e.jsxs(v,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(m,{children:e.jsx(b,{className:" w-full",children:e.jsx(f,{placeholder:"Select relationship"})})}),e.jsxs(S,{children:[e.jsx(i,{value:"Father",children:"Father"}),e.jsx(i,{value:"Mother",children:"Mother"}),e.jsx(i,{value:"Son",children:"Son"}),e.jsx(i,{value:"Daughter",children:"Daughter"}),e.jsx(i,{value:"Brother",children:"Brother"}),e.jsx(i,{value:"Sister",children:"Sister"}),e.jsx(i,{value:"Wife",children:"Wife"}),e.jsx(i,{value:"Husband",children:"Husband"}),e.jsx(i,{value:"Other",children:"Other"})]})]}),e.jsx(j,{className:"text-xs"})]})})]})]})})]})]})]})})})}const Ce=[{id:1,name:"NHIF"},{id:2,name:"Private Insurance"},{id:3,name:"Corporate"}],De={1:[{id:101,name:"Standard NHIF"}],2:[{id:201,name:"Jubilee"},{id:202,name:"AAR"},{id:203,name:"Britam"}],3:[{id:301,name:"Company A"},{id:302,name:"Company B"}]};function we({patient:y=void 0}){console.log(y);const[r,u]=g.useState(""),[n,h]=g.useState(""),[I,w]=g.useState([]),[F,E]=g.useState([]),[N,P]=g.useState({id:0,insuranceName:"",principalNo:"",nhifId:"",principalName:"",relationship:"",isEditing:!1,isNew:!0});g.useEffect(()=>{r?(E(De[r]||[]),h("")):(E([]),h(""))},[r]),g.useEffect(()=>{w([{id:1,insuranceName:"Jubilee",principalNo:"JUB123456",nhifId:"NHIF-001",principalName:"John Doe",relationship:"Self",isEditing:!1,isNew:!1}])},[]);const T=a=>{u(a)},p=a=>{if(h(a),a){const s=F.find(t=>t.id===parseInt(a,10));s&&P(t=>({...t,insuranceName:s.name}))}},A=(a,s)=>{P(t=>({...t,[a]:s}))},V=()=>{if(!N.insuranceName||!N.principalNo){alert("Please fill all required fields");return}const a=I.length>0?Math.max(...I.map(t=>t.id))+1:1,s={...N,id:a,isNew:!1,isEditing:!1};w(t=>[...t,s]),P({id:0,insuranceName:"",principalNo:"",nhifId:"",principalName:"",relationship:"",isEditing:!1,isNew:!0}),u(""),h("")},B=a=>{w(s=>s.map(t=>t.id===a?{...t,isEditing:!t.isEditing}:t))},O=a=>{w(s=>s.map(t=>t.id===a.id?{...a,isEditing:!1}:t))},L=a=>{w(s=>s.filter(t=>t.id!==a))},C=(a,s,t)=>{w(M=>M.map(k=>k.id===a?{...k,[s]:t}:k))};return e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"bg-white border rounded-sm shadow-sm",children:[e.jsx("div",{className:"border-b p-3 pb-2",children:e.jsxs("h3",{className:"text-sm font-medium flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-2 text-blue-500"}),"Add Insurance"]})}),e.jsxs("div",{className:"p-3 pt-2 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Scheme"}),e.jsxs(v,{value:r,onValueChange:T,children:[e.jsx(b,{className:" w-full",children:e.jsx(f,{placeholder:"Select scheme"})}),e.jsx(S,{children:Ce.map(a=>e.jsx(i,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Insurance"}),e.jsxs(v,{value:n,onValueChange:p,disabled:!r,children:[e.jsx(b,{className:" w-full",children:e.jsx(f,{placeholder:"Select insurance"})}),e.jsx(S,{children:F.map(a=>e.jsx(i,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Principal Number"}),e.jsx(x,{className:"",placeholder:"Enter principal number",value:N.principalNo,onChange:a=>A("principalNo",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"NHIF ID"}),e.jsx(x,{className:"",placeholder:"Enter NHIF ID",value:N.nhifId,onChange:a=>A("nhifId",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Principal Name"}),e.jsx(x,{className:"",placeholder:"Enter principal name",value:N.principalName,onChange:a=>A("principalName",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Relationship"}),e.jsxs(v,{value:N.relationship,onValueChange:a=>A("relationship",a),children:[e.jsx(b,{className:" w-full",children:e.jsx(f,{placeholder:"Select relationship"})}),e.jsxs(S,{children:[e.jsx(i,{value:"Self",children:"Self"}),e.jsx(i,{value:"Spouse",children:"Spouse"}),e.jsx(i,{value:"Child",children:"Child"}),e.jsx(i,{value:"Parent",children:"Parent"}),e.jsx(i,{value:"Other",children:"Other"})]})]})]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(D,{onClick:V,className:" text-xs",disabled:!N.insuranceName||!N.principalNo,children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Add Insurance"]})})]})]}),e.jsxs("div",{className:"bg-white border rounded-sm shadow-sm",children:[e.jsx("div",{className:"border-b p-3 pb-2",children:e.jsx("h3",{className:"text-sm font-medium",children:"Insurance Details"})}),e.jsx("div",{className:"p-0",children:I.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Insurance"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Principal #"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"NHIF ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Principal Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Relationship"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-left",children:a.isEditing?e.jsx(x,{className:"h-7",value:a.insuranceName,onChange:s=>C(a.id,"insuranceName",s.target.value)}):a.insuranceName}),e.jsx("td",{className:"px-3 py-2 text-left",children:a.isEditing?e.jsx(x,{className:"h-7",value:a.principalNo,onChange:s=>C(a.id,"principalNo",s.target.value)}):a.principalNo}),e.jsx("td",{className:"px-3 py-2 text-left",children:a.isEditing?e.jsx(x,{className:"h-7",value:a.nhifId,onChange:s=>C(a.id,"nhifId",s.target.value)}):a.nhifId}),e.jsx("td",{className:"px-3 py-2 text-left",children:a.isEditing?e.jsx(x,{className:"h-7",value:a.principalName,onChange:s=>C(a.id,"principalName",s.target.value)}):a.principalName}),e.jsx("td",{className:"px-3 py-2 text-left",children:a.isEditing?e.jsxs(v,{value:a.relationship,onValueChange:s=>C(a.id,"relationship",s),children:[e.jsx(b,{className:"h-7 w-full",children:e.jsx(f,{})}),e.jsxs(S,{children:[e.jsx(i,{value:"Self",children:"Self"}),e.jsx(i,{value:"Spouse",children:"Spouse"}),e.jsx(i,{value:"Child",children:"Child"}),e.jsx(i,{value:"Parent",children:"Parent"}),e.jsx(i,{value:"Other",children:"Other"})]})]}):a.relationship}),e.jsxs("td",{className:"px-3 py-2 text-right",children:[a.isEditing?e.jsx(D,{onClick:()=>O(a),size:"icon",variant:"ghost",className:"h-7 w-7",children:e.jsx(Q,{className:"h-3 w-3"})}):e.jsx(D,{onClick:()=>B(a.id),size:"icon",variant:"ghost",className:"h-7 w-7",children:e.jsx(me,{className:"h-3 w-3"})}),e.jsx(D,{onClick:()=>L(a.id),size:"icon",variant:"ghost",className:"h-7 w-7 text-red-500",children:e.jsx(he,{className:"h-3 w-3"})})]})]},a.id))})]})}):e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No insurance details found. Add insurance details above."})})]})]})}const _=[{id:1,name:"Open"},{id:2,name:"close"}],X=[{id:1,name:"Cash"},{id:2,name:"Insurance"},{id:4,name:"Direct"}],Ie=[{id:1,name:"Self"},{id:2,name:"John Doe"},{id:3,name:"Jane Smith"}],Ee=[{id:1,name:"NHIF"},{id:2,name:"Jubilee"},{id:3,name:"Corporate Scheme"}],Te=[{id:1,name:"Dr. Michael Johnson"},{id:2,name:"Dr. Sarah Williams"},{id:3,name:"Dr. David Chen"},{id:4,name:"Dr. Emily Taylor"}],Ae=l.object({treatmentDate:l.date(),patientStatus:l.string(),paymentType:l.string(),clientName:l.string(),scheme:l.string().optional(),insurer:l.string().optional(),appointmentDate:l.date().optional(),remarks:l.string().optional(),serviceType:l.enum(["Consultation","Pharmacy","Service"]),assignedDoctor:l.string().optional(),items:l.array(l.object({item:l.string(),price:l.number(),quantity:l.number(),id:l.number()})).optional()});function Pe({patient:y}){console.log("Patient data:",y);const r=q({resolver:K(Ae),defaultValues:{treatmentDate:new Date,patientStatus:_[0].name,paymentType:X[0].name,clientName:Ie[0].name,scheme:"",insurer:"",appointmentDate:new Date,remarks:"",serviceType:"Consultation",assignedDoctor:"",items:[]}}),u=n=>{console.log("Saving treatment data:",n),alert("Treatment data saved!")};return e.jsx(R,{...r,children:e.jsx("form",{onSubmit:r.handleSubmit(u),className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center p-3 pb-2 border-b",children:[e.jsx(J,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Treatment Details"})]}),e.jsx("div",{className:"p-3 pt-2",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx(c,{control:r.control,name:"treatmentDate",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Treatment Date"}),e.jsx(m,{children:e.jsx($,{value:n.value,onChange:n.onChange,placeholder:"Select date"})})]})})}),e.jsx("div",{children:e.jsx(c,{control:r.control,name:"patientStatus",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Status"}),e.jsxs(v,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(m,{children:e.jsx(b,{className:"h-10 w-full",children:e.jsx(f,{placeholder:"Select status"})})}),e.jsx(S,{children:_.map(h=>e.jsx(i,{value:h.name,children:h.name},h.id))})]})]})})}),e.jsx("div",{children:e.jsx(c,{control:r.control,name:"assignedDoctor",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Assign Doctor"}),e.jsxs(v,{onValueChange:n.onChange,value:n.value||"",children:[e.jsx(m,{children:e.jsx(b,{className:"h-10 w-full",children:e.jsx(f,{placeholder:"Assign doctor"})})}),e.jsx(S,{children:Te.map(h=>e.jsx(i,{value:h.name,children:h.name},h.id))})]})]})})}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs(D,{type:"submit",className:"h-10",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Save Treatment"]})}),e.jsx("div",{className:"col-span-4 bg-gray-50 p-2 rounded-md",children:e.jsx("h4",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Payment Information"})}),e.jsx("div",{children:e.jsx(c,{control:r.control,name:"paymentType",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Payment Type"}),e.jsxs(v,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(m,{children:e.jsx(b,{className:"h-9 w-full",children:e.jsx(f,{placeholder:"Select type"})})}),e.jsx(S,{children:X.map(h=>e.jsx(i,{value:h.name,children:h.name},h.id))})]})]})})}),e.jsx("div",{children:e.jsx(c,{control:r.control,name:"scheme",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Scheme"}),e.jsxs(v,{onValueChange:n.onChange,value:n.value||"",children:[e.jsx(m,{children:e.jsx(b,{className:"h-9 w-full",children:e.jsx(f,{placeholder:"Select scheme"})})}),e.jsx(S,{children:Ee.map(h=>e.jsx(i,{value:h.name,children:h.name},h.id))})]})]})})}),e.jsx("div",{children:e.jsx(c,{control:r.control,name:"insurer",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Insurer"}),e.jsx(m,{children:e.jsx(x,{className:"h-10",...n})})]})})}),e.jsx("div",{}),e.jsx("div",{className:"col-span-4 bg-gray-50 p-2 rounded-md",children:e.jsx("h4",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Appointment"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(c,{control:r.control,name:"appointmentDate",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Next Appointment"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:"flex-1",children:e.jsx($,{value:n.value,onChange:n.onChange,placeholder:"Select date"})}),e.jsxs(D,{size:"sm",className:"h-10 whitespace-nowrap",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Book"]})]})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(c,{control:r.control,name:"remarks",render:({field:n})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-xs font-medium text-gray-700",children:"Remarks"}),e.jsx(m,{children:e.jsx(ge,{...n,className:"h-10 min-h-10 resize-none",placeholder:"Enter treatment remarks here"})})]})})})]})})]})})})})}function ke(y){const{children:r,value:u,index:n,...h}=y;return e.jsx("div",{role:"tabpanel",hidden:u!==n,id:`consultation-tabpanel-${n}`,"aria-labelledby":`consultation-tab-${n}`,...h,children:u===n&&e.jsx("div",{className:"py-1",children:r})})}const Fe=[{value:"patient",label:"Patient"},{value:"nurse",label:"Nurse"},{value:"admin",label:"Admin"},{value:"finance",label:"Finance"},{value:"pharmacist",label:"Pharmacist"},{value:"doctor",label:"Doctor"},{value:"receiptionist",label:"Receptionist"},{value:"parthologist",label:"Pathologist"}],Me=l.object({entityType:l.enum(["nurse","receptionist","patient","admin","finance","pathologist","pharmacist"]),firstName:l.string().min(1,"First name is required"),middleName:l.string().optional(),lastName:l.string().min(1,"Last name is required"),phone:l.string().min(1,"Phone number is required"),sex:l.enum(["male","female"]),idType:l.enum(["passport","national id"]),idNumber:l.string().min(1,"ID number is required"),passportNumber:l.string().optional(),dob:l.date(),address:l.string().optional(),maritalStatus:l.enum(["single","married","divorced","widowed"]),email:l.string().email().optional()});function Xe(){const{pk:y}=Z(),r=ee(),[u,n]=g.useState(void 0),[h,I]=g.useState(!1),[w,F]=g.useState(""),[E,N]=g.useState(0),[P,T]=g.useState(!1),p=q({resolver:K(Me),defaultValues:{entityType:"patient",firstName:"",middleName:"",lastName:"",phone:"",sex:"male",idType:"national id",idNumber:"",passportNumber:"",dob:new Date,address:"",maritalStatus:"single",email:""}});g.useEffect(()=>{if(y){const s=H.find(t=>t.id===y);s&&(n(s),p.reset({entityType:"patient",firstName:s.firstName||"",middleName:"",lastName:s.lastName||"",phone:s.phone||"",sex:s.sex||"male",idType:s.idType||"national id",idNumber:s.idNumber||"",passportNumber:s.passportNumber||"",dob:s.dateOfBirth?new Date(s.dateOfBirth):new Date,address:s.address||"",maritalStatus:s.maritalStatus||"single",email:s.email||""}))}else r("/healthcare")},[y,p,r]);const A=s=>{if(u){const t={...u,firstName:s.firstName,lastName:s.lastName,phone:s.phone,sex:s.sex,idType:s.idType,idNumber:s.idNumber,passportNumber:s.passportNumber,dateOfBirth:s.dob,address:s.address||"",maritalStatus:s.maritalStatus,email:s.email||"",updatedAt:new Date},M=H.findIndex(k=>k.id===u.id);M!==-1&&(H[M]=t,n(t)),F("Patient updated successfully!"),I(!0)}},V=(s,t)=>{s.preventDefault(),N(t)},B=()=>{T(!0)},O=()=>{N(s=>Math.min(s+1,C.length-1)),T(!1)},L=()=>{N(s=>Math.max(s-1,0))},C=[{label:"Entity Details",component:e.jsx(ye,{patient:u})},{label:"Insurance Details",component:u?e.jsx(we,{patient:u}):null},{label:"Treatment Date",component:u?e.jsx(Pe,{patient:u}):null}],a=()=>{I(!1)};return u?e.jsxs("div",{children:[e.jsx(xe,{open:h,autoHideDuration:6e3,onClose:a,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsxs(U,{onClose:a,severity:"success",sx:{width:"100%"},children:[e.jsx(z,{children:"Success"}),w]})}),e.jsxs("div",{className:"bg-white border rounded-sm mb-2 shadow-sm",children:[e.jsx("div",{className:"border-b p-3 pb-2",children:e.jsx("h2",{className:"text-lg font-medium",children:"Update Entity"})}),e.jsx("div",{className:"p-3 pt-2",children:e.jsx(R,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(A),className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1  sm:grid-cols-4 gap-4",children:[e.jsx(c,{control:p.control,name:"entityType",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Entity Type"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(m,{children:e.jsx(b,{className:"w-full",children:e.jsx(f,{placeholder:"Select entity type"})})}),e.jsx(S,{children:Fe.map(t=>e.jsx(i,{value:t.value,children:t.label},t.value))})]}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"firstName",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"First Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"First name",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"middleName",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Middle Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Middle name",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"lastName",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Last Name"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Last name",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"phone",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Phone"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Phone number",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Email"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Email address",type:"email",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"dob",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Date of Birth"}),e.jsx(m,{children:e.jsx(x,{type:"date",...s,value:s.value?new Date(s.value).toISOString().split("T")[0]:"",onChange:t=>s.onChange(t.target.valueAsDate)})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"sex",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Sex"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(m,{children:e.jsx(b,{className:"w-full",children:e.jsx(f,{placeholder:"Select sex"})})}),e.jsxs(S,{children:[e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"female",children:"Female"})]})]}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"idType",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"ID Type"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(m,{children:e.jsx(b,{className:"w-full",children:e.jsx(f,{placeholder:"Select ID type"})})}),e.jsxs(S,{children:[e.jsx(i,{value:"passport",children:"Passport"}),e.jsx(i,{value:"national id",children:"National ID"})]})]}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"idNumber",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"ID Number"}),e.jsx(m,{children:e.jsx(x,{placeholder:"ID number",...s})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"maritalStatus",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Marital Status"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(m,{children:e.jsx(b,{className:"w-full",children:e.jsx(f,{placeholder:"Select marital status"})})}),e.jsxs(S,{children:[e.jsx(i,{value:"single",children:"Single"}),e.jsx(i,{value:"married",children:"Married"}),e.jsx(i,{value:"divorced",children:"Divorced"}),e.jsx(i,{value:"widowed",children:"Widowed"})]})]}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(c,{control:p.control,name:"address",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{children:"Address"}),e.jsx(m,{children:e.jsx(x,{placeholder:"Address",...s})}),e.jsx(j,{className:"text-xs"})]})})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsx(D,{type:"submit",className:"mt-2",children:"Update Patient"})})]})})})]}),e.jsxs(je,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(se,{square:!0,elevation:0,sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(ue,{value:E,onChange:V,variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"consultation steps",children:C.map((s,t)=>e.jsx(pe,{label:s.label,id:`consultation-tab-${t}`,"aria-controls":`consultation-tabpanel-${t}`},t))})}),e.jsx(Ne,{children:C.map((s,t)=>e.jsxs(ke,{value:E,index:t,children:[s.component,e.jsxs("div",{className:"flex justify-between items-center border-t pt-2 mt-2 border-gray-200",children:[e.jsx(D,{variant:"outline",onClick:L,disabled:E===0,className:"text-xs px-3",children:"Back"}),e.jsx(D,{onClick:B,disabled:E===C.length-1,className:"text-xs px-3",children:"Continue"}),e.jsx(ae,{open:P,onOpenChange:T,children:e.jsxs(ne,{children:[e.jsxs(le,{children:[e.jsx(te,{children:"Confirm Action"}),e.jsx(re,{children:"Are you sure you want to save and continue to the next step?"})]}),e.jsxs(ie,{children:[e.jsx(ce,{onClick:()=>T(!1),children:"Cancel"}),e.jsx(de,{onClick:O,children:"Continue"})]})]})})]})]},t))})]})]}):e.jsxs(U,{severity:"info",children:[e.jsx(z,{children:"Patient Not Found"}),"The requested patient does not exist or could not be loaded. Please select a valid patient."]})}export{Xe as default};
