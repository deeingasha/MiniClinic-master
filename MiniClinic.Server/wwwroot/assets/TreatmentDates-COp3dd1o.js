import{c as w,a as ae,r as n,f as V,p as o,j as e,B as d,L as re}from"./index-KKXNW-6l.js";import{D as le,a as ne,T as ie,b as ce,c as $,d as u,e as oe,f as x,g as de}from"./dialog-DGonRxIX.js";import{I as E}from"./input-rtAShtQR.js";import{S as K,a as z,b as H,c as O,d as p,A as me,e as he,f as ue,g as xe,h as pe,i as fe,j as je,k as ge}from"./alert-dialog-BXVzzcwE.js";import{B as Ne}from"./badge-6EpgP7IY.js";import{P as be}from"./plus-UoG-kHu_.js";import{U as ye,L as we,A as ve,D as _,f as De}from"./AdapterDateFnsV3-CmTilN5a.js";import{E as Ce}from"./eye-Bp3zdP_9.js";import"./index-BNAEoqqT.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Te=w("arrow-right",Se);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],q=w("search",ke);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Pe=w("trash",Le);function Oe(){const B=ae(),[v,f]=n.useState([]),D=new Date,[j,C]=n.useState(D),[g,S]=n.useState(D),[m,T]=n.useState(""),[h,k]=n.useState(""),[N,L]=n.useState(""),[M,U]=n.useState(""),[Q,b]=n.useState(!1),[P,R]=n.useState(!1);n.useEffect(()=>{const s=V.map(a=>{const r=o.find(t=>t.id===a.patientId);return{...a,patientName:r?`${r.firstName} ${r.lastName}`:"Unknown"}});f(s),setTimeout(()=>c(),0)},[]);const c=()=>{let s=V.map(t=>{const l=o.find(i=>i.id===t.patientId);return{...t,patientName:l?`${l.firstName} ${l.lastName}`:"Unknown"}});const a=j,r=g;if((a||r)&&(s=s.filter(t=>{const l=new Date(t.date);if(l.setHours(0,0,0,0),a){const i=new Date(a);if(i.setHours(0,0,0,0),l<i)return!1}if(r){const i=new Date(r);if(i.setHours(0,0,0,0),l>i)return!1}return!0})),N){const t=N.toLowerCase();s=s.filter(l=>l.patientName.toLowerCase().includes(t)||l.patientId.toLowerCase().includes(t)||l.doctor.firstName.toLowerCase().includes(t)||l.doctor.lastName.toLowerCase().includes(t))}m&&(alert("yooo"),s=s.filter(t=>t.status.toLowerCase()===m.toLowerCase())),h&&(s=s.filter(t=>t.type.toLowerCase()===h.toLowerCase())),f(s),R(!1)};n.useEffect(()=>{c()},[j,g,m,h]);const W=s=>{L(s.target.value),setTimeout(()=>c(),10)},G=()=>{const s=new Date;C(s),S(s),L(""),T(""),k(""),setTimeout(()=>c(),100)},J=s=>{U(s),b(!0)},X=()=>{const s=v.filter(a=>a.id!==M);f(s),b(!1)},Y=[{accessorKey:"patientId",header:"Patient",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col py-1 space-y-1",children:[e.jsx("span",{className:"text-sm text-primary",children:s.getValue("patientId")}),e.jsx("span",{children:s.getValue("patientName")})]})},{accessorKey:"patientName",header:"Patient Name"},{accessorKey:"date",header:"Visit Date",cell:({row:s})=>De(s.getValue("date"),"PPP")},{accessorKey:"type",header:"Treatment Type"},{accessorKey:"type",header:"Payment Type"},{accessorKey:"status",header:"Status",cell:({row:s})=>{const a=s.getValue("status");let r;switch(a.toLowerCase()){case"open":r="bg-green-100 text-green-800";break;case"closed":r="bg-gray-100 text-gray-800";break;case"scheduled":r="bg-blue-100 text-blue-800";break;case"completed":r="bg-emerald-100 text-emerald-800";break;case"cancelled":r="bg-red-100 text-red-800";break;case"pending":r="bg-amber-100 text-amber-800";break;default:r="bg-gray-100 text-gray-800"}return e.jsx(Ne,{variant:"outline",className:r,children:a})}},{accessorKey:"doctor",header:"Doctor",accessorFn:s=>`${s.doctor.firstName} ${s.doctor.lastName}`},{id:"actions",header:"Actions",cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-primary border-primary",asChild:!0,children:e.jsxs(re,{to:`/healthcare/treatment-dates/${a.id}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]})}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>J(a.id),className:"h-8 w-8 p-0 text-red-600 border-red-600",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})}}],[Z,y]=n.useState(!1),[A,ee]=n.useState(""),[se,te]=n.useState(o);return e.jsxs("div",{className:"p-6 bg-white shadow",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Treatment Dates"}),e.jsx("p",{className:"text-gray-500",children:"Manage and view all patient treatment dates and appointments"})]}),e.jsxs(d,{className:"py-6 text-lg",onClick:()=>y(!0),children:[e.jsx(be,{})," Add Treatment Date"]}),e.jsx(le,{open:Z,onOpenChange:y,children:e.jsx(ne,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select a Patient"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Search and select a patient to create a new treatment date"})]}),e.jsx("div",{className:"flex w-full items-center space-x-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(q,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Search patients by name, ID, or phone...",className:"pl-8",value:A,onChange:s=>{const a=s.target.value.toLowerCase();ee(a);const r=o.filter(t=>{var l,i,I,F;return((l=t.id)==null?void 0:l.toLowerCase().includes(a))||((i=t.firstName)==null?void 0:i.toLowerCase().includes(a))||((I=t.lastName)==null?void 0:I.toLowerCase().includes(a))||((F=t.phone)==null?void 0:F.toLowerCase().includes(a))||`${t.firstName} ${t.lastName}`.toLowerCase().includes(a)});te(r)}})]})}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(ie,{children:[e.jsx(ce,{children:e.jsxs($,{children:[e.jsx(u,{children:"ID"}),e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Phone"}),e.jsx(u,{className:"text-right",children:"Action"})]})}),e.jsx(oe,{children:(A?se:o).map(s=>e.jsxs($,{className:"cursor-pointer hover:bg-muted/50",children:[e.jsx(x,{className:"font-medium",children:s.id}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.firstName," ",s.lastName]})}),e.jsx(x,{children:s.phone}),e.jsx(x,{className:"text-right",children:e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{y(!1),B(`/healthcare/entity-registration/${s.id}`)},children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View Patient"})]})})]},s.id))})]})})]})})})]}),e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Filters"}),P&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating results..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(E,{placeholder:"Patient name, ID or doctor...",value:N,onChange:W,className:"pl-9 w-full"})]})]}),e.jsxs(we,{dateAdapter:ve,children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Status"}),e.jsxs(K,{value:m,onValueChange:s=>{T(s),setTimeout(()=>c(),0)},children:[e.jsx(z,{className:"w-full",children:e.jsx(H,{placeholder:"Patient Statuses"})}),e.jsxs(O,{children:[e.jsx(p,{value:"open",children:"Open"}),e.jsx(p,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Treatment Type"}),e.jsxs(K,{value:h,onValueChange:s=>{k(s)},children:[e.jsx(z,{className:"w-full",children:e.jsx(H,{placeholder:"All Types"})}),e.jsxs(O,{children:[e.jsx(p,{value:"inpatient",children:"Inpatient"}),e.jsx(p,{value:"outpatient",children:"Outpatient"})]})]})]}),e.jsxs("div",{className:"md:col-span-4 flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),e.jsx(_,{value:j,onChange:s=>C(s),slotProps:{textField:{size:"small",fullWidth:!0,className:"text-sm bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"}}})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),e.jsx(_,{value:g,onChange:s=>S(s),slotProps:{textField:{size:"small",fullWidth:!0,className:"text-sm bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"}}})]})]}),e.jsx("div",{className:"md:col-span-1 flex justify-end",children:e.jsx(d,{variant:"outline",onClick:G,disabled:P,className:"h-10 w-full",children:"Reset"})})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx(de,{columns:Y,data:v,searchKey:"patientName",searchPlaceholder:"Filter by patient name..."})}),e.jsx(me,{open:Q,onOpenChange:b,children:e.jsxs(he,{children:[e.jsxs(ue,{children:[e.jsx(xe,{children:"Are you sure you want to delete this treatment?"}),e.jsx(pe,{children:"This action cannot be undone. This will permanently delete the treatment record."})]}),e.jsxs(fe,{children:[e.jsx(je,{children:"Cancel"}),e.jsx(ge,{onClick:X,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}export{Oe as default};
