import{c as Ee,s as us,h as hs,r as y,i as Ge,k as Fe,j as e,d as I,l as ps,m as B,n as E,o as xs,u as gs,q as fs,S as ys,B as W,v as G,C as js,T as bs,w as vs,x as F,y as L,z as V,A as R,D as Ce,E as Ns,F as ye,G as K,I as Cs,J as Ds,K as ne,N as je,O as ws,P as De,Q as we,U as Ss,f as ks,V as Ps}from"./index-KKXNW-6l.js";import{I as A}from"./input-rtAShtQR.js";import{S as J,a as q,b as X,c as Z,d as ee,A as Ue,e as We,f as Ve,g as Le,h as Ke,i as Qe,j as Ye,k as _e}from"./alert-dialog-BXVzzcwE.js";import{u as Je,s as qe,F as Xe,a as T,b as M,c as $,d as H,z as D}from"./form-Bx7btksj.js";import{i as Ts,u as Ms,L as Ze,A as es,D as ss,f as be,B as se,U as $s}from"./AdapterDateFnsV3-CmTilN5a.js";import{T as Se,S as Hs,a as As,C as he,b as pe,c as Rs,d as Os,e as zs}from"./Tabs-BBdMdsUr.js";import{g as Is,D as ts,a as as,h as ns,i as rs,j as is,X as Bs}from"./dialog-DGonRxIX.js";import{P as Es}from"./plus-UoG-kHu_.js";import{A as ke}from"./Alert-Tprf8h7W.js";import"./index-BNAEoqqT.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Fs=Ee("activity",Gs);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Ws=Ee("file-pen-line",Us);function Vs(s={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:o}=s,i=us("div",{shouldForwardProp:r=>r!=="theme"&&r!=="sx"&&r!=="as"})(hs);return y.forwardRef(function(m,x){const h=Ge(n),{className:v,component:f="div",...j}=Fe(m);return e.jsx(i,{as:f,ref:x,className:I(v,o?o(a):a),theme:t&&h[t]||h,...j})})}const Ls=ps(),Ks=(s,t)=>s.filter(n=>t.includes(n)),Y=(s,t,n)=>{const a=s.keys[0];Array.isArray(t)?t.forEach((o,i)=>{n((u,r)=>{i<=s.keys.length-1&&(i===0?Object.assign(u,r):u[s.up(s.keys[i])]=r)},o)}):t&&typeof t=="object"?(Object.keys(t).length>s.keys.length?s.keys:Ks(s.keys,Object.keys(t))).forEach(i=>{if(s.keys.includes(i)){const u=t[i];u!==void 0&&n((r,m)=>{a===i?Object.assign(r,m):r[s.up(i)]=m},u)}}):(typeof t=="number"||typeof t=="string")&&n((o,i)=>{Object.assign(o,i)},t)};function re(s){return`--Grid-${s}Spacing`}function oe(s){return`--Grid-parent-${s}Spacing`}const Pe="--Grid-columns",Q="--Grid-parent-columns",Qs=({theme:s,ownerState:t})=>{const n={};return Y(s.breakpoints,t.size,(a,o)=>{let i={};o==="grow"&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(i={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / var(${Q}) - (var(${Q}) - ${o}) * (var(${oe("column")}) / var(${Q})))`}),a(n,i)}),n},Ys=({theme:s,ownerState:t})=>{const n={};return Y(s.breakpoints,t.offset,(a,o)=>{let i={};o==="auto"&&(i={marginLeft:"auto"}),typeof o=="number"&&(i={marginLeft:o===0?"0px":`calc(100% * ${o} / var(${Q}) + var(${oe("column")}) * ${o} / var(${Q}))`}),a(n,i)}),n},_s=({theme:s,ownerState:t})=>{if(!t.container)return{};const n={[Pe]:12};return Y(s.breakpoints,t.columns,(a,o)=>{const i=o??12;a(n,{[Pe]:i,"> *":{[Q]:i}})}),n},Js=({theme:s,ownerState:t})=>{if(!t.container)return{};const n={};return Y(s.breakpoints,t.rowSpacing,(a,o)=>{var u;const i=typeof o=="string"?o:(u=s.spacing)==null?void 0:u.call(s,o);a(n,{[re("row")]:i,"> *":{[oe("row")]:i}})}),n},qs=({theme:s,ownerState:t})=>{if(!t.container)return{};const n={};return Y(s.breakpoints,t.columnSpacing,(a,o)=>{var u;const i=typeof o=="string"?o:(u=s.spacing)==null?void 0:u.call(s,o);a(n,{[re("column")]:i,"> *":{[oe("column")]:i}})}),n},Xs=({theme:s,ownerState:t})=>{if(!t.container)return{};const n={};return Y(s.breakpoints,t.direction,(a,o)=>{a(n,{flexDirection:o})}),n},Zs=({ownerState:s})=>({minWidth:0,boxSizing:"border-box",...s.container&&{display:"flex",flexWrap:"wrap",...s.wrap&&s.wrap!=="wrap"&&{flexWrap:s.wrap},gap:`var(${re("row")}) var(${re("column")})`}}),et=s=>{const t=[];return Object.entries(s).forEach(([n,a])=>{a!==!1&&a!==void 0&&t.push(`grid-${n}-${String(a)}`)}),t},st=(s,t="xs")=>{function n(a){return a===void 0?!1:typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"&&a>0}if(n(s))return[`spacing-${t}-${String(s)}`];if(typeof s=="object"&&!Array.isArray(s)){const a=[];return Object.entries(s).forEach(([o,i])=>{n(i)&&a.push(`spacing-${o}-${String(i)}`)}),a}return[]},tt=s=>s===void 0?[]:typeof s=="object"?Object.entries(s).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(s)}`];function at(s,t){s.item!==void 0&&delete s.item,s.zeroMinWidth!==void 0&&delete s.zeroMinWidth,t.keys.forEach(n=>{s[n]!==void 0&&delete s[n]})}const nt=xs(),rt=Ls("div",{name:"MuiGrid",slot:"Root",overridesResolver:(s,t)=>t.root});function it(s){return Ms({props:s,name:"MuiGrid",defaultTheme:nt})}function ot(s={}){const{createStyledComponent:t=rt,useThemeProps:n=it,useTheme:a=Ge,componentName:o="MuiGrid"}=s,i=(x,h)=>{const{container:v,direction:f,spacing:j,wrap:g,size:b}=x,w={root:["root",v&&"container",g!=="wrap"&&`wrap-xs-${String(g)}`,...tt(f),...et(b),...v?st(j,h.breakpoints.keys[0]):[]]};return B(w,k=>E(o,k),{})};function u(x,h,v=()=>!0){const f={};return x===null||(Array.isArray(x)?x.forEach((j,g)=>{j!==null&&v(j)&&h.keys[g]&&(f[h.keys[g]]=j)}):typeof x=="object"?Object.keys(x).forEach(j=>{const g=x[j];g!=null&&v(g)&&(f[j]=g)}):f[h.keys[0]]=x),f}const r=t(_s,qs,Js,Qs,Xs,Zs,Ys),m=y.forwardRef(function(h,v){const f=a(),j=n(h),g=Fe(j);at(g,f.breakpoints);const{className:b,children:w,columns:k=12,container:P=!1,component:d="div",direction:p="row",wrap:S="wrap",size:c={},offset:l={},spacing:C=0,rowSpacing:_=C,columnSpacing:U=C,unstable_level:O=0,...ce}=g,de=u(c,f.breakpoints,z=>z!==!1),me=u(l,f.breakpoints),ue=h.columns??(O?void 0:k),ls=h.spacing??(O?void 0:C),cs=h.rowSpacing??h.spacing??(O?void 0:_),ds=h.columnSpacing??h.spacing??(O?void 0:U),ve={...g,level:O,columns:ue,container:P,direction:p,wrap:S,spacing:ls,rowSpacing:cs,columnSpacing:ds,size:de,offset:me},ms=i(ve,f);return e.jsx(r,{ref:v,as:d,ownerState:ve,className:I(ms.root,b),...ce,children:y.Children.map(w,z=>{var Ne;return y.isValidElement(z)&&Ts(z,["Grid"])&&P&&z.props.container?y.cloneElement(z,{unstable_level:((Ne=z.props)==null?void 0:Ne.unstable_level)??O+1}):z})})});return m.muiName="Grid",m}const lt=[{id:1,date:"2025-03-15"},{id:2,date:"2025-02-20"},{id:3,date:"2025-01-10"}],ct=D.object({date:D.date(),checkedDate:D.string().optional(),ageYears:D.string().optional(),ageMonths:D.string().optional(),height:D.string().optional(),weight:D.string().optional(),bmi:D.string().optional(),bloodPressure:D.string().optional(),saturation:D.string().optional(),temperature:D.string().optional(),pulseRate:D.string().optional()});function dt({patient:s}){const t=Je({resolver:qe(ct),defaultValues:{date:new Date,checkedDate:"",ageYears:"",ageMonths:"",height:"",weight:"",bmi:"",bloodPressure:"",saturation:"",temperature:"",pulseRate:""}}),{watch:n,setValue:a}=t,o=n("height"),i=n("weight");y.useEffect(()=>{if(s&&s.dateOfBirth){const r=new Date(s.dateOfBirth),m=new Date;let x=m.getFullYear()-r.getFullYear(),h=m.getMonth()-r.getMonth();(h<0||h===0&&m.getDate()<r.getDate())&&(x--,h=h+12),m.getDate()<r.getDate()&&(h--,h<0&&(h=11)),a("ageYears",x.toString()),a("ageMonths",h.toString())}},[s,a]),y.useEffect(()=>{if(o&&i){const r=parseFloat(o)/100,m=parseFloat(i);if(r>0&&m>0){const x=(m/(r*r)).toFixed(1);a("bmi",x)}}},[o,i,a]);const u=r=>{console.log("Saving triage data:",r),alert("Triage data saved!")};return e.jsx(Xe,{...t,children:e.jsx("form",{onSubmit:t.handleSubmit(u),className:"space-y-4 mt-2",children:e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center p-3 pb-2 border-b",children:[e.jsx(Fs,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Patient Triage Information"})]}),e.jsx("div",{className:"p-3 pt-2",children:e.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-4",children:[e.jsx("div",{children:e.jsx(T,{control:t.control,name:"date",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Date"}),e.jsx(H,{children:e.jsx(Ze,{dateAdapter:es,children:e.jsx(ss,{value:r.value,onChange:m=>r.onChange(m),slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}}})})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"checkedDate",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Checked Dates"}),e.jsxs(J,{onValueChange:m=>{r.onChange(m)},value:r.value,children:[e.jsx(H,{children:e.jsx(q,{className:"w-full",children:e.jsx(X,{placeholder:"Select date"})})}),e.jsx(Z,{children:lt.map(m=>e.jsx(ee,{value:m.date,children:be(new Date(m.date),"MMMM dd, yyyy")},m.id))})]})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"ageYears",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Age (Years)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Years",...r,readOnly:!0,style:{backgroundColor:"#f5f5f5"},className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"ageMonths",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Age (Months)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Months",...r,readOnly:!0,style:{backgroundColor:"#f5f5f5"},className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"height",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Height (cm)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Height",type:"number",...r,className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"weight",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Weight (Kg)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Weight",type:"number",...r,className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"bmi",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"BMI (Kg/m²)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"BMI",disabled:!0,...r,className:"w-full"})})]})})}),e.jsx("div",{}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"bloodPressure",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"BP (mmHg)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"120/80",...r,className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"saturation",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"O₂ Saturation (%)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Saturation",type:"number",...r,className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"temperature",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Temperature (°C)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Temperature",type:"number",...r,className:"w-full"})})]})})}),e.jsx("div",{children:e.jsx(T,{control:t.control,name:"pulseRate",render:({field:r})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Pulse Rate (B/m)"}),e.jsx(H,{children:e.jsx(A,{placeholder:"Pulse Rate",type:"number",...r,className:"w-full"})})]})})})]})})]})})})}const Te=[{id:1,date:"2025-03-15",label:"Respiratory infection - Mar 15",doctorName:"Dr. Michael Johnson",medicalHistory:"Patient presented with fever and cough for 3 days. No previous respiratory issues.",diagnosis1:"Acute bronchitis",diagnosis2:"Dehydration",diagnosis3:"",remarks:"Advised rest and increased fluid intake"},{id:2,date:"2025-02-20",label:"Hypertension check - Feb 20",doctorName:"Dr. Sarah Williams",medicalHistory:"Regular blood pressure monitoring. Patient reports occasional headaches.",diagnosis1:"Essential hypertension",diagnosis2:"Stress-related headaches",diagnosis3:"",remarks:"Continue medication. Advised stress management techniques."},{id:3,date:"2025-01-10",label:"Diabetes follow-up - Jan 10",doctorName:"Dr. David Chen",medicalHistory:"Regular diabetes check-up. Blood glucose levels have been stable.",diagnosis1:"Type 2 diabetes mellitus",diagnosis2:"Peripheral neuropathy",diagnosis3:"Hypertension",remarks:"Continue current medication regimen. Schedule eye examination."}],mt=D.object({diagnosisId:D.string().optional(),doctorName:D.string().optional(),medicalHistory:D.string().min(1,"Medical history is required"),diagnosis1:D.string().min(1,"Primary diagnosis is required"),diagnosis2:D.string().optional(),diagnosis3:D.string().optional(),remarks:D.string().optional(),date:D.date().optional()});function ut({patient:s}){const{user:t}=gs();if(t===null)return e.jsx(fs,{});const[n,a]=y.useState([]),[o,i]=y.useState(!1),[u,r]=y.useState(!1),[m,x]=y.useState(null),[h,v]=y.useState(null);console.log(s);const f=Je({resolver:qe(mt),defaultValues:{diagnosisId:"",doctorName:`${t.firstName} ${t.lastName}`,medicalHistory:"",diagnosis1:"",diagnosis2:"",diagnosis3:"",remarks:"",date:new Date}});y.useEffect(()=>{const d=Te.map(p=>({id:p.id,doctorName:p.doctorName,medicalHistory:p.medicalHistory,diagnosis1:p.diagnosis1,diagnosis2:p.diagnosis2,diagnosis3:p.diagnosis3||"",remarks:p.remarks,date:new Date(p.date)}));a(d)},[]);const j=d=>{const p=Te.find(S=>S.id===d);p&&(f.reset({diagnosisId:d.toString(),doctorName:p.doctorName,medicalHistory:p.medicalHistory,diagnosis1:p.diagnosis1,diagnosis2:p.diagnosis2||"",diagnosis3:p.diagnosis3||"",remarks:p.remarks||"",date:new Date(p.date)}),x(d),i(!0))},g=()=>{f.reset({diagnosisId:"",doctorName:"",medicalHistory:"",diagnosis1:"",diagnosis2:"",diagnosis3:"",remarks:"",date:new Date}),x(null),i(!0)},b=d=>{if(console.log("Saving diagnosis data:",d),m)a(p=>p.map(S=>S.id===m?{...S,doctorName:`${t.firstName} ${t.lastName}`,medicalHistory:d.medicalHistory,diagnosis1:d.diagnosis1,diagnosis2:d.diagnosis2||"",diagnosis3:d.diagnosis3||"",remarks:d.remarks||"",date:d.date??new Date}:S));else{const p={id:Date.now(),doctorName:`${t.firstName} ${t.lastName}`,medicalHistory:d.medicalHistory,diagnosis1:d.diagnosis1,diagnosis2:d.diagnosis2||"",diagnosis3:d.diagnosis3||"",remarks:d.remarks||"",date:d.date??new Date};a(S=>[...S,p])}i(!1),x(null),console.log("Diagnosis data saved!")},w=d=>{v(d),r(!0)},k=()=>{h&&(a(d=>d.filter(p=>p.id!==h)),r(!1),v(null),console.log("Diagnosis deleted successfully!"))},P=[{accessorKey:"id",header:"#",cell:({row:d})=>d.index+1},{accessorKey:"doctorName",header:"Doctor Name"},{accessorKey:"medicalHistory",header:"Medical History & Examination",cell:({row:d})=>{const p=d.getValue("medicalHistory");return e.jsx("div",{className:"max-w-[250px] truncate",title:p,children:p})}},{accessorKey:"diagnosis1",header:"Diagnosis 1"},{accessorKey:"diagnosis2",header:"Diagnosis 2"},{accessorKey:"diagnosis3",header:"Diagnosis 3"},{accessorKey:"date",header:"Date",cell:({row:d})=>{const p=d.getValue("date");return be(p,"MMM dd, yyyy")}},{id:"actions",header:"Actions",cell:({row:d})=>{const p=d.original;return e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(W,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>j(Number(p.id)),children:[e.jsx("span",{className:"sr-only",children:"Edit"}),e.jsx(Ws,{className:"h-4 w-4"})]}),e.jsxs(W,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-destructive hover:text-destructive/80 hover:bg-destructive/10",onClick:()=>w(Number(p.id)),children:[e.jsx("span",{className:"sr-only",children:"Delete"}),e.jsx(As,{className:"h-4 w-4"})]})]})}}];return e.jsxs("div",{className:"space-y-4 grid grid-cols-1",children:[e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 pb-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ys,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Doctor's Diagnosis"})]}),e.jsxs(W,{size:"sm",className:"bg-blue-500 hover:bg-blue-600",onClick:g,children:[e.jsx(Es,{className:"mr-1 h-3 w-3"}),"Add Diagnosis"]})]}),e.jsx("div",{className:"p-2",children:e.jsx(Is,{columns:P,data:n,showGlobalFilter:!1})})]}),e.jsx(ts,{open:o,onOpenChange:i,children:e.jsxs(as,{className:"sm:max-w-[800px]",children:[e.jsx(ns,{children:e.jsx(rs,{children:m?"Edit Diagnosis":"Add New Diagnosis"})}),e.jsx(Xe,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(b),className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsx(T,{control:f.control,name:"doctorName",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Doctor Name"}),e.jsx(H,{children:e.jsx(A,{...d,placeholder:"Doctor",value:`${t.firstName} ${t.lastName}`,readOnly:!0})})]})}),e.jsx(T,{control:f.control,name:"date",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Date"}),e.jsx(H,{children:e.jsx(Ze,{dateAdapter:es,children:e.jsx(ss,{value:d.value,onChange:p=>d.onChange(p),slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}},readOnly:!0})})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:e.jsx(T,{control:f.control,name:"medicalHistory",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Medical History & Examination"}),e.jsx(H,{children:e.jsx(Se,{...d,placeholder:"Enter patient's medical history and examination notes",className:"resize-none h-20"})})]})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsx(T,{control:f.control,name:"diagnosis1",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Diagnosis 1"}),e.jsx(H,{children:e.jsx(A,{...d,placeholder:"Primary diagnosis"})})]})}),e.jsx(T,{control:f.control,name:"diagnosis2",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Diagnosis 2"}),e.jsx(H,{children:e.jsx(A,{...d,placeholder:"Secondary diagnosis (optional)"})})]})}),e.jsx(T,{control:f.control,name:"diagnosis3",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Diagnosis 3"}),e.jsx(H,{children:e.jsx(A,{...d,placeholder:"Tertiary diagnosis (optional)"})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:e.jsx(T,{control:f.control,name:"remarks",render:({field:d})=>e.jsxs(M,{children:[e.jsx($,{className:"text-xs font-medium text-gray-700",children:"Remarks"}),e.jsx(H,{children:e.jsx(Se,{...d,placeholder:"Enter any additional remarks or notes",className:"resize-none h-16"})})]})})}),e.jsxs(is,{children:[e.jsxs(W,{type:"button",variant:"outline",onClick:()=>i(!1),children:[e.jsx(Bs,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(W,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),m?"Update":"Save"]})]})]})})]})}),e.jsx(Ue,{open:u,onOpenChange:r,children:e.jsxs(We,{children:[e.jsxs(Ve,{children:[e.jsx(Le,{children:"Are you sure?"}),e.jsx(Ke,{children:"This will permanently delete this diagnosis record. This action cannot be undone."})]}),e.jsxs(Qe,{children:[e.jsx(Ye,{onClick:()=>r(!1),children:"Cancel"}),e.jsx(_e,{onClick:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}const ht=G("MuiBox",["root"]),pt=vs(),xe=Vs({themeId:bs,defaultTheme:pt,defaultClassName:ht.root,generateClassName:js.generate});function xt(s){return E("MuiCardHeader",s)}const ie=G("MuiCardHeader",["root","avatar","action","content","title","subheader"]),gt=s=>{const{classes:t}=s;return B({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},xt,t)},ft=R("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(s,t)=>[{[`& .${ie.title}`]:t.title},{[`& .${ie.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),yt=R("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(s,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),jt=R("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(s,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),bt=R("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(s,t)=>t.content})({flex:"1 1 auto",[`.${Ce.root}:where(& .${ie.title})`]:{display:"block"},[`.${Ce.root}:where(& .${ie.subheader})`]:{display:"block"}}),ge=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiCardHeader"}),{action:o,avatar:i,component:u="div",disableTypography:r=!1,subheader:m,subheaderTypographyProps:x,title:h,titleTypographyProps:v,slots:f={},slotProps:j={},...g}=a,b={...a,component:u,disableTypography:r},w=gt(b),k={slots:f,slotProps:{title:v,subheader:x,...j}};let P=h;const[d,p]=L("title",{className:w.title,elementType:V,externalForwardedProps:k,ownerState:b,additionalProps:{variant:i?"body2":"h5",component:"span"}});P!=null&&P.type!==V&&!r&&(P=e.jsx(d,{...p,children:P}));let S=m;const[c,l]=L("subheader",{className:w.subheader,elementType:V,externalForwardedProps:k,ownerState:b,additionalProps:{variant:i?"body2":"body1",color:"textSecondary",component:"span"}});S!=null&&S.type!==V&&!r&&(S=e.jsx(c,{...l,children:S}));const[C,_]=L("root",{ref:n,className:w.root,elementType:ft,externalForwardedProps:{...k,...g,component:u},ownerState:b}),[U,O]=L("avatar",{className:w.avatar,elementType:yt,externalForwardedProps:k,ownerState:b}),[ce,de]=L("content",{className:w.content,elementType:bt,externalForwardedProps:k,ownerState:b}),[me,ue]=L("action",{className:w.action,elementType:jt,externalForwardedProps:k,ownerState:b});return e.jsxs(C,{..._,children:[i&&e.jsx(U,{...O,children:i}),e.jsxs(ce,{...de,children:[P,S]}),o&&e.jsx(me,{...ue,children:o})]})}),fe=ot({createStyledComponent:R("div",{name:"MuiGrid",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:s=>F({props:s,name:"MuiGrid"}),useTheme:Ns}),os=y.createContext();function vt(s){return E("MuiTable",s)}G("MuiTable",["root","stickyHeader"]);const Nt=s=>{const{classes:t,stickyHeader:n}=s;return B({root:["root",n&&"stickyHeader"]},vt,t)},Ct=R("table",{name:"MuiTable",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,n.stickyHeader&&t.stickyHeader]}})(ye(({theme:s})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...s.typography.body2,padding:s.spacing(2),color:(s.vars||s).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),Me="table",$e=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTable"}),{className:o,component:i=Me,padding:u="normal",size:r="medium",stickyHeader:m=!1,...x}=a,h={...a,component:i,padding:u,size:r,stickyHeader:m},v=Nt(h),f=y.useMemo(()=>({padding:u,size:r,stickyHeader:m}),[u,r,m]);return e.jsx(os.Provider,{value:f,children:e.jsx(Ct,{as:i,role:i===Me?null:"table",ref:n,className:I(v.root,o),ownerState:h,...x})})}),le=y.createContext();function Dt(s){return E("MuiTableBody",s)}G("MuiTableBody",["root"]);const wt=s=>{const{classes:t}=s;return B({root:["root"]},Dt,t)},St=R("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(s,t)=>t.root})({display:"table-row-group"}),kt={variant:"body"},He="tbody",Ae=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTableBody"}),{className:o,component:i=He,...u}=a,r={...a,component:i},m=wt(r);return e.jsx(le.Provider,{value:kt,children:e.jsx(St,{className:I(m.root,o),as:i,ref:n,role:i===He?null:"rowgroup",ownerState:r,...u})})});function Pt(s){return E("MuiTableCell",s)}const Tt=G("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Mt=s=>{const{classes:t,variant:n,align:a,padding:o,size:i,stickyHeader:u}=s,r={root:["root",n,u&&"stickyHeader",a!=="inherit"&&`align${K(a)}`,o!=="normal"&&`padding${K(o)}`,`size${K(i)}`]};return B(r,Pt,t)},$t=R("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,t[n.variant],t[`size${K(n.size)}`],n.padding!=="normal"&&t[`padding${K(n.padding)}`],n.align!=="inherit"&&t[`align${K(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(ye(({theme:s})=>({...s.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:s.vars?`1px solid ${s.vars.palette.TableCell.border}`:`1px solid
    ${s.palette.mode==="light"?Cs(ne(s.palette.divider,1),.88):Ds(ne(s.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(s.vars||s).palette.text.primary,lineHeight:s.typography.pxToRem(24),fontWeight:s.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(s.vars||s).palette.text.primary}},{props:{variant:"footer"},style:{color:(s.vars||s).palette.text.secondary,lineHeight:s.typography.pxToRem(21),fontSize:s.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Tt.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(s.vars||s).palette.background.default}}]}))),N=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTableCell"}),{align:o="inherit",className:i,component:u,padding:r,scope:m,size:x,sortDirection:h,variant:v,...f}=a,j=y.useContext(os),g=y.useContext(le),b=g&&g.variant==="head";let w;u?w=u:w=b?"th":"td";let k=m;w==="td"?k=void 0:!k&&b&&(k="col");const P=v||g&&g.variant,d={...a,align:o,component:w,padding:r||(j&&j.padding?j.padding:"normal"),size:x||(j&&j.size?j.size:"medium"),sortDirection:h,stickyHeader:P==="head"&&j&&j.stickyHeader,variant:P},p=Mt(d);let S=null;return h&&(S=h==="asc"?"ascending":"descending"),e.jsx($t,{as:w,ref:n,className:I(p.root,i),"aria-sort":S,scope:k,ownerState:d,...f})});function Ht(s){return E("MuiTableContainer",s)}G("MuiTableContainer",["root"]);const At=s=>{const{classes:t}=s;return B({root:["root"]},Ht,t)},Rt=R("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(s,t)=>t.root})({width:"100%",overflowX:"auto"}),Re=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTableContainer"}),{className:o,component:i="div",...u}=a,r={...a,component:i},m=At(r);return e.jsx(Rt,{ref:n,as:i,className:I(m.root,o),ownerState:r,...u})});function Ot(s){return E("MuiTableHead",s)}G("MuiTableHead",["root"]);const zt=s=>{const{classes:t}=s;return B({root:["root"]},Ot,t)},It=R("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(s,t)=>t.root})({display:"table-header-group"}),Bt={variant:"head"},Oe="thead",ze=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTableHead"}),{className:o,component:i=Oe,...u}=a,r={...a,component:i},m=zt(r);return e.jsx(le.Provider,{value:Bt,children:e.jsx(It,{as:i,className:I(m.root,o),ref:n,role:i===Oe?null:"rowgroup",ownerState:r,...u})})});function Et(s){return E("MuiTableRow",s)}const Ie=G("MuiTableRow",["root","selected","hover","head","footer"]),Gt=s=>{const{classes:t,selected:n,hover:a,head:o,footer:i}=s;return B({root:["root",n&&"selected",a&&"hover",o&&"head",i&&"footer"]},Et,t)},Ft=R("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(ye(({theme:s})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Ie.hover}:hover`]:{backgroundColor:(s.vars||s).palette.action.hover},[`&.${Ie.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:ne(s.palette.primary.main,s.palette.action.selectedOpacity),"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:ne(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity)}}}))),Be="tr",te=y.forwardRef(function(t,n){const a=F({props:t,name:"MuiTableRow"}),{className:o,component:i=Be,hover:u=!1,selected:r=!1,...m}=a,x=y.useContext(le),h={...a,component:i,hover:u,selected:r,head:x&&x.variant==="head",footer:x&&x.variant==="footer"},v=Gt(h);return e.jsx(Ft,{as:i,ref:n,className:I(v.root,o),role:i===Be?null:"row",ownerState:h,...m})}),Ut=je(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Wt=je(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Vt=je(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),ae=[{id:1,name:"Amoxicillin",unit:"mg",stockQuantity:200,unitPrice:250,timesPerDayOptions:[1,2,3,4],durationOptions:["3 days","5 days","7 days","10 days","14 days"]},{id:2,name:"Paracetamol",unit:"mg",stockQuantity:500,unitPrice:150,timesPerDayOptions:[1,2,3,4,6],durationOptions:["3 days","5 days","7 days","10 days","14 days"]},{id:3,name:"Aspirin",unit:"mg",stockQuantity:300,unitPrice:180,timesPerDayOptions:[1,2],durationOptions:["7 days","14 days","30 days"]},{id:4,name:"Ibuprofen",unit:"mg",stockQuantity:400,unitPrice:200,timesPerDayOptions:[2,3,4],durationOptions:["3 days","5 days","7 days","10 days"]}],Lt=[{id:1,date:"2025-03-15",doctor:"Dr. John Smith",drugs:[{id:101,drugId:1,drugName:"Amoxicillin",doses:"500",unit:"mg",timesPerDay:3,duration:"7 days",remarks:"Take after meals",stockQuantity:200,unitPrice:250},{id:102,drugId:2,drugName:"Paracetamol",doses:"1000",unit:"mg",timesPerDay:4,duration:"5 days",remarks:"Take as needed for pain",stockQuantity:500,unitPrice:150}]},{id:2,date:"2025-02-20",doctor:"Dr. Lisa Wilson",drugs:[{id:201,drugId:3,drugName:"Aspirin",doses:"100",unit:"mg",timesPerDay:1,duration:"30 days",remarks:"Take with food",stockQuantity:300,unitPrice:180}]},{id:3,date:"2025-01-10",doctor:"Dr. Robert Johnson",drugs:[{id:301,drugId:4,drugName:"Ibuprofen",doses:"400",unit:"mg",timesPerDay:3,duration:"7 days",remarks:"Take for inflammation",stockQuantity:400,unitPrice:200},{id:302,drugId:2,drugName:"Paracetamol",doses:"500",unit:"mg",timesPerDay:3,duration:"5 days",remarks:"Take for fever",stockQuantity:500,unitPrice:150}]}];function Kt({patient:s}){const[t,n]=y.useState(""),[a,o]=y.useState([]),[i,u]=y.useState([]),[r,m]=y.useState(""),[x,h]=y.useState(!1),[v,f]=y.useState(null);y.useEffect(()=>{u(Lt),m("Dr. Lisa Wilson")},[s]);const j=c=>{n(c?Number(c):"")},g=()=>{o([]),f(null),h(!0)},b=c=>{const l=i.find(C=>C.id===c);l&&(o(l.drugs),f(c),h(!0))},w=()=>{if(!t)return;const c=ae.find(l=>l.id===t);if(c){if(a.some(l=>l.drugId===t)){alert("This drug is already in the prescription.");return}o(l=>[...l,{id:Date.now(),drugId:c.id,drugName:c.name,doses:"",unit:c.unit,timesPerDay:"",duration:"",remarks:"",stockQuantity:c.stockQuantity,unitPrice:c.unitPrice}]),n("")}},k=c=>{o(l=>l.filter(C=>C.id!==c))},P=(c,l,C)=>{o(_=>_.map(U=>U.id===c?{...U,[l]:C}:U))},d=()=>{if(a.length===0){alert("Please add at least one drug to the prescription.");return}if(a.some(l=>!l.doses||!l.timesPerDay||!l.duration)){alert("Please fill all required fields for all drugs in the prescription.");return}if(v)u(l=>l.map(C=>C.id===v?{...C,drugs:a,date:new Date().toISOString().split("T")[0]}:C));else{const l={id:Date.now(),date:new Date().toISOString().split("T")[0],doctor:r,drugs:a};u(C=>[...C,l])}alert("Prescription submitted successfully!"),h(!1),o([]),f(null)},p=c=>{const l=ae.find(C=>C.id===c);return l?l.timesPerDayOptions:[]},S=c=>{const l=ae.find(C=>C.id===c);return l?l.durationOptions:[]};return e.jsxs(xe,{children:[e.jsxs(he,{elevation:0,children:[e.jsx(ge,{title:"Prescription History",subheader:"View all prescriptions for this patient",action:e.jsx(se,{variant:"contained",color:"primary",startIcon:e.jsx(Wt,{}),onClick:g,children:"New Prescription"})}),e.jsx(ws,{}),e.jsx(pe,{children:i.length===0?e.jsx(ke,{severity:"info",sx:{mb:2},children:"No prescription history found for this patient."}):e.jsx(Re,{component:De,elevation:0,children:e.jsxs($e,{children:[e.jsx(ze,{children:e.jsxs(te,{children:[e.jsx(N,{width:"160px",children:"Date"}),e.jsx(N,{children:"Doctor"}),e.jsx(N,{children:"Medications"}),e.jsx(N,{width:"100px",align:"center",children:"Actions"})]})}),e.jsx(Ae,{children:i.map(c=>e.jsxs(te,{children:[e.jsx(N,{children:c.date}),e.jsx(N,{children:c.doctor}),e.jsx(N,{children:c.drugs.map(l=>e.jsx("div",{style:{marginBottom:"4px"},children:e.jsxs(V,{variant:"body2",component:"span",children:[l.drugName,": ",l.doses," ",l.unit,", ",l.timesPerDay,"x daily, ",l.duration]})},l.id))}),e.jsx(N,{align:"center",children:e.jsx(we,{color:"primary",onClick:()=>b(c.id),size:"small",children:e.jsx(Vt,{fontSize:"small"})})})]},c.id))})]})})})]}),e.jsx(ts,{open:x,onOpenChange:h,children:e.jsxs(as,{className:"min-w-5xl",children:[e.jsx(ns,{children:e.jsx(rs,{children:v?"Edit Prescription":"Create New Prescription"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(he,{elevation:0,sx:{mb:3},children:[e.jsx(ge,{title:"Add Medications",subheader:`Doctor: ${r}`,sx:{pb:1}}),e.jsx(pe,{children:e.jsxs(fe,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(fe,{size:{xs:12},children:e.jsxs(xe,{sx:{mb:0},children:[e.jsx(V,{variant:"body2",sx:{mb:1},children:"Select Medication"}),e.jsxs(J,{value:t.toString(),onValueChange:j,children:[e.jsx(q,{className:"w-full",children:e.jsx(X,{placeholder:"Select a medication"})}),e.jsx(Z,{children:ae.map(c=>e.jsxs(ee,{value:c.id.toString(),children:[c.name," (",c.unit,")"]},c.id))})]})]})}),e.jsx(fe,{size:{xs:12,md:4},children:e.jsx(se,{variant:"contained",color:"primary",onClick:w,disabled:!t,fullWidth:!0,children:"Add to Prescription"})})]})})]}),e.jsxs(he,{elevation:0,children:[e.jsx(ge,{title:"Prescription Details",sx:{pb:1}}),e.jsx(pe,{children:a.length===0?e.jsx(ke,{severity:"info",children:"No medications added to the prescription yet."}):e.jsx(Re,{component:De,elevation:0,children:e.jsxs($e,{size:"small",children:[e.jsx(ze,{children:e.jsxs(te,{children:[e.jsx(N,{children:"Medication"}),e.jsx(N,{children:"Dosage"}),e.jsx(N,{children:"Times/Day"}),e.jsx(N,{children:"Duration"}),e.jsx(N,{children:"DOA"}),e.jsx(N,{children:"Remarks"}),e.jsx(N,{children:"Stock"}),e.jsx(N,{children:"Unit Price"}),e.jsx(N,{align:"center",children:"Actions"})]})}),e.jsx(Ae,{children:a.map(c=>e.jsxs(te,{children:[e.jsx(N,{children:c.drugName}),e.jsx(N,{children:e.jsxs(xe,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(A,{className:"w-20 mr-2",value:c.doses,onChange:l=>P(c.id,"doses",l.target.value),placeholder:"Dosage"}),e.jsx(V,{variant:"body2",children:c.unit})]})}),e.jsx(N,{children:e.jsxs(J,{value:c.timesPerDay?c.timesPerDay.toString():"",onValueChange:l=>P(c.id,"timesPerDay",Number(l)),children:[e.jsx(q,{className:"w-20",children:e.jsx(X,{placeholder:"Times/day"})}),e.jsx(Z,{children:p(c.drugId).map(l=>e.jsx(ee,{value:l.toString(),children:l},l))})]})}),e.jsx(N,{children:e.jsxs(J,{value:c.duration,onValueChange:l=>P(c.id,"duration",l),children:[e.jsx(q,{className:"w-24",children:e.jsx(X,{placeholder:"Duration"})}),e.jsx(Z,{children:S(c.drugId).map(l=>e.jsx(ee,{value:l,children:l},l))})]})}),e.jsx(N,{children:e.jsxs(J,{value:c.timesPerDay?c.timesPerDay.toString():"",onValueChange:l=>P(c.id,"timesPerDay",Number(l)),children:[e.jsx(q,{className:"w-20",children:e.jsx(X,{placeholder:"Times/day"})}),e.jsx(Z,{children:p(c.drugId).map(l=>e.jsx(ee,{value:l.toString(),children:l},l))})]})}),e.jsx(N,{children:e.jsx(A,{className:"w-full",value:c.remarks,onChange:l=>P(c.id,"remarks",l.target.value),placeholder:"Special instructions"})}),e.jsx(N,{children:c.stockQuantity}),e.jsxs(N,{children:["Ksh.",c.unitPrice]}),e.jsx(N,{align:"center",children:e.jsx(we,{color:"error",onClick:()=>k(c.id),size:"small",children:e.jsx(Ut,{fontSize:"small"})})})]},c.id))})]})})})]})]}),e.jsxs(is,{children:[e.jsx(se,{variant:"outlined",onClick:()=>h(!1),sx:{mr:1},children:"Cancel"}),e.jsx(se,{variant:"contained",color:"primary",onClick:d,disabled:a.length===0,children:v?"Update Prescription":"Save Prescription"})]})]})})]})}function na(){const{pk:s}=Ss(),[t,n]=y.useState(null),[a,o]=y.useState(null),[i,u]=y.useState(!1);y.useEffect(()=>{const g=ks.find(b=>b.id===s);g&&(o(g),n(g.patient))},[s]);const[r,m]=y.useState(0);if(!a)return e.jsx("div",{children:"Consultation not found"});const x=[{label:"Triage",component:e.jsx(dt,{patient:a.patient})},{label:"Doctor",component:e.jsx(ut,{patient:a.patient})},{label:"Prescription",component:e.jsx(Kt,{patient:a.patient})}],h=(g,b)=>{g.preventDefault(),m(b)},v=()=>{u(!0)},f=()=>{m(g=>Math.min(g+1,x.length-1)),u(!1)},j=()=>{m(g=>Math.max(g-1,0))};return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[e.jsx(Ue,{open:i,onOpenChange:u,children:e.jsxs(We,{children:[e.jsxs(Ve,{children:[e.jsx(Le,{children:"Confirm Action"}),e.jsx(Ke,{children:"Are you sure you want to save and continue to the next step?"})]}),e.jsxs(Qe,{children:[e.jsx(Ye,{onClick:()=>u(!1),children:"Cancel"}),e.jsx(_e,{onClick:f,children:"Continue"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center border-b pb-2 mb-4",children:[e.jsx($s,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("h3",{className:"text-lg font-medium text-primary",children:"Patient Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Name"}),e.jsx("p",{className:"text-sm font-medium",children:t?`${t.firstName||"N/A"} ${t.lastName||""}`:"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Date of Birth"}),e.jsx("p",{className:"text-sm",children:t!=null&&t.dateOfBirth?be(new Date(t.dateOfBirth),"MMM d, yyyy"):"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:(t==null?void 0:t.phone)||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:(t==null?void 0:t.email)||"N/A"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center border-b pb-2 mb-4",children:[e.jsx(Rs,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("h3",{className:"text-lg font-medium text-primary",children:"Consultation Details"})]}),e.jsxs("div",{className:"",children:[e.jsx(Os,{value:r,onChange:h,variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"consultation steps",children:x.map((g,b)=>e.jsx(zs,{label:e.jsx("div",{children:e.jsx("p",{className:"font-semibold",children:g.label})}),id:`consultation-tab-${b}`,"aria-controls":`consultation-tabpanel-${b}`},b))}),x.map((g,b)=>e.jsxs(Qt,{value:r,index:b,children:[g.component,e.jsxs("div",{className:"flex pt-3 justify-between",children:[e.jsx(W,{variant:"outline",onClick:j,disabled:r===0,children:"Back"}),e.jsx(W,{color:"primary",onClick:v,disabled:r===x.length-1,children:"Continue"})]})]},b))]}),(a==null?void 0:a.notes)&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ps,{className:"text-muted-foreground mr-2 h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Notes"})]}),e.jsx("div",{className:"bg-muted/50 p-3 rounded-md text-sm",children:a.notes})]})]})]})}function Qt(s){const{children:t,value:n,index:a,...o}=s;return e.jsx("div",{role:"tabpanel",hidden:n!==a,id:`consultation-tabpanel-${a}`,"aria-labelledby":`consultation-tab-${a}`,...o,children:n===a&&e.jsx("div",{className:"py-3",children:t})})}export{na as default};
