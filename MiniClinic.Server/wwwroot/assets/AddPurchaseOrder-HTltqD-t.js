import{c as I,r as E,j as e,B as b}from"./index-nOuz7UgQ.js";import{A as B,a as H,b as z,c as R,e as Q,f as K}from"./alert-dialog-Cli71-ps.js";import{I as j}from"./input-DklGojSC.js";import{S as f,a as y,b as v,c as P,d as w}from"./select-DT7Kb_gw.js";import{u as U,s as X,F as $,a as c,b as o,c as d,d as m,e as u,z as l}from"./form-ofhE3mRP.js";import{T as G,a as J,b as S,c as x,d as W,e as h}from"./table-4xI31D1l.js";import{C as Y}from"./date-picker-B-Lwwkpp.js";import{S as C}from"./separator-D8j4061u.js";import{P as Z}from"./plus-CZDVeQSw.js";import{X as ee}from"./x-uWU76mA2.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],re=I("send",se);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],le=I("trash",ae),ne=l.object({supplier:l.string({required_error:"Please select a supplier"}),lpoNo:l.string({required_error:"Please select an LPO number"}),lpoDate:l.date({required_error:"Please select a date"}),remarks:l.string().optional(),supplierEmail:l.string().email("Invalid email address").optional(),password:l.string().optional(),items:l.array(l.object({drugName:l.string(),unitPrice:l.number().min(0,"Price must be a positive number"),quantity:l.number().min(1,"Quantity must be at least 1")})).min(1,"At least one item is required")});function pe({open:A,onOpenChange:D}){const[n,p]=E.useState([{id:1,drugName:"",unitPrice:0,quantity:0}]),t=U({resolver:X(ne),defaultValues:{supplier:"",lpoNo:"",lpoDate:new Date,remarks:"",supplierEmail:"",password:"",items:[{drugName:"",unitPrice:0,quantity:0}]}});function F(s){console.log("Form submitted:",s)}const k=()=>{const s=n.length>0?Math.max(...n.map(r=>r.id))+1:1;p([...n,{id:s,drugName:"",unitPrice:0,quantity:0}])},T=s=>{n.length>1&&p(n.filter(r=>r.id!==s))},g=(s,r,a)=>{if(r==="drugName"){const i=String(a),_=q(i);p(n.map(N=>N.id===s?{...N,drugName:i,unitPrice:_}:N))}else p(n.map(i=>i.id===s?{...i,[r]:a}:i))},q=s=>({Paracetamol:150,Amoxicillin:350,Ibuprofen:200,Metformin:450,Atorvastatin:750})[s]||0,O=(s,r)=>(s*r).toFixed(2),L=["Supplier A","Supplier B","Supplier C"],V=["LPO-001","LPO-002","LPO-003"],M=["Paracetamol","Amoxicillin","Ibuprofen","Metformin","Atorvastatin"];return e.jsx(B,{open:A,onOpenChange:D,children:e.jsxs(H,{className:"w-full min-w-4xl",children:[e.jsx(z,{children:e.jsx(R,{className:"text-xl font-bold",children:"Purchase Order"})}),e.jsx($,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(F),className:"space-y-4 overflow-y-auto max-h-[90vh]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{control:t.control,name:"supplier",render:({field:s})=>e.jsxs(o,{children:[e.jsx(d,{children:"Supplier"}),e.jsxs(f,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(y,{className:"w-full",children:e.jsx(v,{placeholder:"Select supplier"})})}),e.jsx(P,{children:L.map(r=>e.jsx(w,{value:r,children:r},r))})]}),e.jsx(u,{})]})}),e.jsx(c,{control:t.control,name:"remarks",render:({field:s})=>e.jsxs(o,{children:[e.jsx(d,{children:"Remarks"}),e.jsx(m,{children:e.jsx(j,{...s})}),e.jsx(u,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{control:t.control,name:"lpoNo",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(d,{children:"LPO No."}),e.jsxs(f,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(y,{className:"w-full",children:e.jsx(v,{placeholder:"Select LPO"})})}),e.jsx(P,{children:V.map(r=>e.jsx(w,{value:r,children:r},r))})]}),e.jsx(u,{})]})}),e.jsx(c,{control:t.control,name:"lpoDate",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(d,{children:"LPO Date"}),e.jsx(m,{children:e.jsx(Y,{value:s.value,onChange:s.onChange,placeholder:"Select date"})}),e.jsx(u,{})]})})]})]}),e.jsx("div",{className:"py-2",children:e.jsx(C,{})}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(S,{children:[e.jsx(x,{className:"w-12",children:"Item"}),e.jsx(x,{children:"Drug Name"}),e.jsx(x,{className:"w-24",children:"Unit price"}),e.jsx(x,{className:"w-20",children:"Qty"}),e.jsx(x,{className:"w-24",children:"Total"}),e.jsx(x,{className:"w-24",children:"Action"})]})}),e.jsx(W,{children:n.map((s,r)=>e.jsxs(S,{children:[e.jsx(h,{children:r+1}),e.jsx(h,{children:e.jsxs(f,{value:s.drugName,onValueChange:a=>g(s.id,"drugName",a),children:[e.jsx(y,{className:"w-full",children:e.jsx(v,{placeholder:"Select drug"})}),e.jsx(P,{children:M.map(a=>e.jsx(w,{value:a,children:a},a))})]})}),e.jsx(h,{children:e.jsx(j,{type:"number",value:s.unitPrice||"",onChange:a=>g(s.id,"unitPrice",parseFloat(a.target.value)||0),className:"w-full"})}),e.jsx(h,{children:e.jsx(j,{type:"number",value:s.quantity||"",onChange:a=>g(s.id,"quantity",parseInt(a.target.value)||0),className:"w-full"})}),e.jsxs(h,{children:["Ksh.",O(s.unitPrice,s.quantity)]}),e.jsx(h,{children:e.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(s.id),disabled:n.length<=1,children:e.jsx(le,{className:"h-4 w-4"})})})]},s.id))})]})}),e.jsxs(b,{type:"button",variant:"outline",onClick:k,className:"w-full border-primary text-primary hover:text-primary hover:bg-primary/10",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"})," Add Item"]}),e.jsx("div",{className:"py-4",children:e.jsx(C,{})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{control:t.control,name:"supplierEmail",render:({field:s})=>e.jsxs(o,{children:[e.jsx(d,{children:"Supplier Email"}),e.jsx(m,{children:e.jsx(j,{...s,type:"email"})}),e.jsx(u,{})]})}),e.jsx(c,{control:t.control,name:"password",render:({field:s})=>e.jsxs(o,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(j,{...s,type:"password"})}),e.jsx(u,{})]})})]}),e.jsxs(Q,{className:"gap-4",children:[e.jsxs(K,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Close"]}),e.jsxs(b,{type:"button",children:[e.jsx(re,{className:"h-4 w-4 mr-2"})," Send LPO to Supplier"]})]})]})})]})})}export{pe as P,re as S};
