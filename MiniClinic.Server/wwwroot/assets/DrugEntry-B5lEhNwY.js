import{j as e,B as y,r as x,aj as N,ak as M}from"./index-nOuz7UgQ.js";import{D as O}from"./data-table-Ba5JECbl.js";import{I as j}from"./input-DklGojSC.js";import{S,a as C,b as D,c as F,d as p}from"./select-DT7Kb_gw.js";import{A as K,a as q,b as R,c as I,e as z,f as B}from"./alert-dialog-Cli71-ps.js";import{T as G}from"./textarea-BYs_5LZy.js";import{u as Q,s as U,F as J,a as i,b as o,c as d,d as m,e as u,f as H,z as t}from"./form-ofhE3mRP.js";import{X}from"./x-uWU76mA2.js";import{P as w}from"./plus-CZDVeQSw.js";import{P as Y}from"./AddPurchaseOrder-HTltqD-t.js";import{F as W}from"./funnel-CufVOaQJ.js";import{S as Z}from"./search-B6zcHxLG.js";import"./table-4xI31D1l.js";import"./index-3ZGvXOoV.js";import"./label-BgUwjubx.js";import"./date-picker-B-Lwwkpp.js";import"./separator-D8j4061u.js";const _=t.object({drugName:t.string().min(2,{message:"Drug name is required"}),drugCode:t.string().min(2,{message:"Drug code is required"}),drugType:t.string().min(1,{message:"Drug type is required"}),manufacturer:t.string().min(1,{message:"Manufacturer is required"}),reorderLevel:t.coerce.number().min(0,{message:"Reorder level must be a positive number"}),totalStock:t.coerce.number().min(0,{message:"Total stock must be a positive number"}),unitPrice:t.coerce.number().min(0,{message:"Unit price must be a positive number"}),description:t.string().optional()});function $({open:n,onOpenChange:b}){const a=Q({resolver:U(_),defaultValues:{drugName:"",drugCode:"",drugType:"",manufacturer:"",reorderLevel:10,totalStock:0,unitPrice:0,description:""}});function g(r){console.log("Form submitted:",r),b(!1)}const h=["Analgesic","Antibiotic","Antiviral","Antihistamine","Antidepressant","Antihypertensive","Bronchodilator","Statin","ACE Inhibitor"],f=["Pfizer","Merck","Johnson & Johnson","GlaxoSmithKline","Novartis","Roche","Sanofi","AbbVie","Bayer"];return e.jsx(K,{open:n,onOpenChange:b,children:e.jsxs(q,{className:"min-w-2xl overflow-y-auto max-h-[90vh]",children:[e.jsx(R,{children:e.jsx(I,{className:"text-xl font-bold",children:"Drug Entry"})}),e.jsx(J,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.jsx("div",{className:"col-span-3",children:e.jsx(i,{control:a.control,name:"drugType",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Drug Type"}),e.jsxs(S,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(C,{className:"w-full",children:e.jsx(D,{placeholder:"Select drug type"})})}),e.jsx(F,{children:h.map(l=>e.jsx(p,{value:l,children:l},l))})]}),e.jsx(u,{})]})})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{control:a.control,name:"drugCode",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Drug Code"}),e.jsx(m,{children:e.jsx(j,{...r,placeholder:"e.g., DRUG-001"})}),e.jsx(u,{})]})}),e.jsx(i,{control:a.control,name:"drugName",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Drug Name"}),e.jsx(m,{children:e.jsx(j,{...r,placeholder:"e.g., Paracetamol"})}),e.jsx(u,{})]})}),e.jsx(i,{control:a.control,name:"manufacturer",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Manufacturer"}),e.jsxs(S,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(C,{className:"w-full",children:e.jsx(D,{placeholder:"Select manufacturer"})})}),e.jsx(F,{children:f.map(l=>e.jsx(p,{value:l,children:l},l))})]}),e.jsx(u,{})]})}),e.jsx(i,{control:a.control,name:"reorderLevel",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Reorder Level"}),e.jsx(m,{children:e.jsx(j,{...r,type:"number",min:"0"})}),e.jsx(H,{children:"Minimum stock level before reordering"}),e.jsx(u,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{control:a.control,name:"unitPrice",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Unit Price (Ksh)"}),e.jsx(m,{children:e.jsx(j,{...r,type:"number",min:"0",step:"0.01"})}),e.jsx(u,{})]})}),e.jsx(i,{control:a.control,name:"totalStock",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Total QTY in stock"}),e.jsx(m,{children:e.jsx(j,{...r,type:"number",min:"0"})}),e.jsx(u,{})]})}),e.jsx(i,{control:a.control,name:"description",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Description"}),e.jsx(m,{children:e.jsx(G,{...r,placeholder:"Enter drug description, usage instructions, etc.",className:"min-h-[120px]"})}),e.jsx(u,{})]})})]})]}),e.jsxs(z,{className:"gap-2 pt-2",children:[e.jsxs(B,{children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Close"]}),e.jsxs(y,{type:"submit",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Drug"]})]})]})})]})})}const ee=[{accessorKey:"id",header:"#",cell:({row:n})=>n.index+1},{accessorKey:"name",header:"Drug Name"},{accessorKey:"code",header:"Code"},{accessorKey:"type",header:"Type"},{accessorKey:"manufacturer",header:"Manufacturer"},{accessorKey:"stock",header:"Stock",cell:({row:n})=>n.original.stock>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-500",children:n.getValue("stock")}),e.jsx("span",{className:"text-green-500",children:"In Stock"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-500",children:n.getValue("stock")}),e.jsx("span",{className:"text-red-500",children:"Out of Stock"})]})}];function fe(){const[n,b]=x.useState(N),[a,g]=x.useState(""),[h,f]=x.useState(""),[r,l]=x.useState(""),T=[...new Set(N.map(s=>s.manufacturer))],P=[...new Set(N.map(s=>s.type))];x.useEffect(()=>{let s=[...N];if(a&&(s=s.filter(c=>c.manufacturer===a)),h&&(s=s.filter(c=>c.type===h)),r){const c=r.toLowerCase();s=s.filter(v=>v.name.toLowerCase().includes(c)||v.code.toLowerCase().includes(c)||v.manufacturer.toLowerCase().includes(c)||v.type.toLowerCase().includes(c))}b(s)},[a,h,r]);const V=()=>{g(""),f(""),l("")},[E,A]=x.useState(!1),[L,k]=x.useState(!1);return e.jsxs("div",{className:"space-y-4 grid grid-cols-1",children:[e.jsxs("div",{className:"bg-white rounded-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 pb-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"mr-2 h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"text-sm font-medium",children:"Drugs"})]}),e.jsxs("div",{className:"flex justify-end items-center gap-4",children:[e.jsxs(y,{size:"sm",className:"bg-blue-500 hover:bg-blue-600",onClick:()=>A(!0),children:[e.jsx(w,{className:"mr-1 h-3 w-3"}),"Purchase Order"]}),e.jsxs(y,{size:"sm",className:"bg-blue-500 hover:bg-blue-600",onClick:()=>k(!0),children:[e.jsx(w,{className:"mr-1 h-3 w-3"}),"Add Drug"]})]})]}),e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx(W,{className:"mr-1 h-3 w-3"}),"Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(j,{placeholder:"Search drugs...",className:"pl-8",value:r,onChange:s=>l(s.target.value)})]})}),e.jsx("div",{children:e.jsxs(S,{value:a,onValueChange:s=>{g(s==="all"?"":s)},children:[e.jsx(C,{className:"w-full",children:e.jsx(D,{placeholder:"Filter by Manufacturer"})}),e.jsxs(F,{children:[e.jsx(p,{value:"all",children:"All Manufacturers"}),T.map(s=>e.jsx(p,{value:s,children:s},s))]})]})}),e.jsx("div",{children:e.jsxs(S,{value:h,onValueChange:s=>{f(s==="all"?"":s)},children:[e.jsx(C,{className:"w-full",children:e.jsx(D,{placeholder:"Filter by Type"})}),e.jsxs(F,{children:[e.jsx(p,{value:"all",children:"All Types"}),P.map(s=>e.jsx(p,{value:s,children:s},s))]})]})}),e.jsx("div",{children:e.jsx(y,{variant:"outline",onClick:V,className:"w-full",children:"Reset Filters"})})]})]}),e.jsx("div",{className:"p-2",children:e.jsx(O,{columns:ee,data:n,showGlobalFilter:!1})})]}),e.jsx($,{open:L,onOpenChange:k}),e.jsx(Y,{open:E,onOpenChange:A})]})}export{fe as default};
